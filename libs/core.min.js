var Flash2xVersionInfo="Flash2Lufylegend2.0";var OS_PC="pc",OS_IPHONE="iPhone",OS_IPOD="iPod",OS_IPAD="iPad",OS_ANDROID="Android",OS_WINDOWS_PHONE="Windows Phone",OS_BLACK_BERRY="BlackBerry",NONE="none",UNDEFINED="undefined",LANDSCAPE="landscape",PORTRAIT="portrait",mouseX,mouseY;function LEvent(a){this.eventType=a;this._ll_preventDefault=!1}LEvent.prototype.preventDefault=function(){this._ll_preventDefault=!0};LEvent.INIT="init";LEvent.COMPLETE="complete";LEvent.ENTER_FRAME="enter_frame";LEvent.WINDOW_RESIZE="resize";
LEvent.WINDOW_ORIENTATIONCHANGE="orientationchange";LEvent.SOUND_COMPLETE="sound_complete";LEvent.END_CONTACT="endContact";LEvent.PRE_SOLVE="preSolve";LEvent.POST_SOLVE="postSolve";LEvent.BEGIN_CONTACT="beginContact";LEvent.addEventListener=function(a,d,c,b){null==b&&(b=!1);a.addEventListener?a.addEventListener(d,c,b):a.attachEvent&&(a["e"+d+c]=c,a[d+c]=function(){a["e"+d+c]()},a.attachEvent("on"+d,a[d+c]))};
LEvent.removeEventListener=function(a,d,c,b){null==b&&(b=!1);a.removeEventListener?a.removeEventListener(d,c,b):a.detachEvent&&(a["e"+d+c]=c,a[d+c]=function(){a["e"+d+c]()},a.detachEvent("on"+d,a[d+c]))};var LMouseEvent=function(){throw"LMouseEvent cannot be instantiated";};LMouseEvent.MOUSE_DOWN="mousedown";LMouseEvent.MOUSE_UP="mouseup";LMouseEvent.TOUCH_START="touchstart";LMouseEvent.TOUCH_MOVE="touchmove";LMouseEvent.TOUCH_END="touchend";LMouseEvent.MOUSE_MOVE="mousemove";
LMouseEvent.MOUSE_OVER="mouseover";LMouseEvent.MOUSE_OUT="mouseout";LMouseEvent.DOUBLE_CLICK="dblclick";var LMultitouchInputMode=function(){throw"LMultitouchInputMode cannot be instantiated";};LMultitouchInputMode.NONE="none";LMultitouchInputMode.GESTURE="gesture";LMultitouchInputMode.TOUCH_POINT="touchPoint";var LMultitouch=function(){throw"LMultitouch cannot be instantiated";};LMultitouch.inputMode="none";LMultitouch.touchs=[];
var LTimerEvent=function(){throw"LTimerEvent cannot be instantiated";};LTimerEvent.TIMER="timer";LTimerEvent.TIMER_COMPLETE="timerComplete";var LTextEvent=function(){throw"LTextEvent cannot be instantiated";};LTextEvent.TEXT_INPUT="textInput";LTextEvent.WIND_COMPLETE="windComplete";var LFocusEvent=function(){throw"LFocusEvent cannot be instantiated";};LFocusEvent.FOCUS_IN="focusIn";LFocusEvent.FOCUS_OUT="focusOut";
var LMouseEventContainer=function(){function a(){this.container={};this.dispatchAllEvent=!1;this.mouseDownContainer=[];this.mouseUpContainer=[];this.mouseMoveContainer=[];this.mouseOverContainer=[];this.mouseOutContainer=[];this.mouseDblContainer=[];this.textFieldInputContainer=[];this.buttonContainer=[]}a.prototype={pushInputBox:function(a){var c=this.textFieldInputContainer,b,e;b=0;for(e=c.length;b<e;b++)if(a.objectIndex==c[b].objectIndex)return;this.textFieldInputContainer.push(a)},removeInputBox:function(a){var c=
this.textFieldInputContainer,b,e;b=0;for(e=c.length;b<e;b++)if(a.objectIndex==c[b].objectIndex){this.textFieldInputContainer.splice(b,1);break}},pushButton:function(a){var c=this.buttonContainer,b,e;b=0;for(e=c.length;b<e;b++)if(a.objectIndex==c[b].objectIndex)return;this.buttonContainer.push(a)},removeButton:function(a){var c=this.buttonContainer,b,e;b=0;for(e=c.length;b<e;b++)if(a.objectIndex==c[b].objectIndex){this.buttonContainer.splice(b,1);break}},dispatchEventButton:function(a){var c=this.buttonContainer,
b;b=0;for(c=c.length;b<c;b++)"function"==typeof this.buttonContainer[b].ll_button_mode&&this.buttonContainer[b].ll_button_mode(a)},addEvent:function(a,c,b){c.push({container:a,listener:b})},removeEvent:function(a,c,b){var e,n;e=0;for(n=c.length;e<n;e++)if(c[e].container.objectIndex===a.objectIndex&&(!b||c[e].listener==b)){c.splice(e,1);break}},addMouseDownEvent:function(a,c){this.addEvent(a,this.mouseDownContainer,c)},addMouseUpEvent:function(a,c){this.addEvent(a,this.mouseUpContainer,c)},addMouseMoveEvent:function(a,
c){this.addEvent(a,this.mouseMoveContainer,c)},addMouseOverEvent:function(a,c){this.addEvent(a,this.mouseOverContainer,c)},addMouseOutEvent:function(a,c){this.addEvent(a,this.mouseOutContainer,c)},addMouseDblEvent:function(a,c){this.addEvent(a,this.mouseDblContainer,c)},addMouseEvent:function(a,c,b){c==LMouseEvent.MOUSE_DOWN?this.addMouseDownEvent(a,b):c==LMouseEvent.MOUSE_UP?this.addMouseUpEvent(a,b):c==LMouseEvent.MOUSE_OVER?this.addMouseOverEvent(a,b):c==LMouseEvent.MOUSE_OUT?this.addMouseOutEvent(a,
b):c==LMouseEvent.MOUSE_MOVE?this.addMouseMoveEvent(a,b):this.addMouseDblEvent(a,b)},hasEventListener:function(a,c,b){c=c==LMouseEvent.MOUSE_DOWN?this.mouseDownContainer:c==LMouseEvent.MOUSE_UP?this.mouseUpContainer:c==LMouseEvent.MOUSE_OVER?this.mouseOverContainer:c==LMouseEvent.MOUSE_OUT?this.mouseOutContainer:c==LMouseEvent.MOUSE_MOVE?this.mouseMoveContainer:this.mouseDblContainer;for(var e=0,n=c.length;e<n;e++)if(c[e].container.objectIndex===a.objectIndex&&(!b||c[e].listener==b))return!0;return!1},
removeMouseDownEvent:function(a,c){this.removeEvent(a,this.mouseDownContainer,c)},removeMouseUpEvent:function(a,c){this.removeEvent(a,this.mouseUpContainer,c)},removeMouseMoveEvent:function(a,c){this.removeEvent(a,this.mouseMoveContainer,c)},removeMouseOverEvent:function(a,c){this.removeEvent(a,this.mouseOverContainer,c)},removeMouseOutEvent:function(a,c){this.removeEvent(a,this.mouseOutContainer,c)},removeMouseDblEvent:function(a,c){this.removeEvent(a,this.mouseDblContainer,c)},removeMouseEvent:function(a,
c,b){c==LMouseEvent.MOUSE_DOWN?this.removeMouseDownEvent(a,b):c==LMouseEvent.MOUSE_UP?this.removeMouseUpEvent(a,b):c==LMouseEvent.MOUSE_OVER?this.removeMouseOverEvent(a,b):c==LMouseEvent.MOUSE_OUT?this.removeMouseOutEvent(a,b):c==LMouseEvent.MOUSE_MOVE?this.removeMouseMoveEvent(a,b):this.removeMouseDblEvent(a,b)},dispatchMouseEvent:function(a,c){c==LMouseEvent.MOUSE_DOWN?(this.dispatchEvent(a,this.mouseDownContainer,LMouseEvent.MOUSE_DOWN),this.dispatchEvent(a,this.textFieldInputContainer)):c==LMouseEvent.MOUSE_UP?
this.dispatchEvent(a,this.mouseUpContainer,LMouseEvent.MOUSE_UP):c==LMouseEvent.DOUBLE_CLICK?this.dispatchEvent(a,this.mouseDblContainer,LMouseEvent.DOUBLE_CLICK):(this.dispatchEventButton(a),this.dispatchEvent(a,this.mouseOutContainer,LMouseEvent.MOUSE_OUT),this.dispatchEvent(a,this.mouseOverContainer,LMouseEvent.MOUSE_OVER),this.dispatchEvent(a,this.mouseMoveContainer,LMouseEvent.MOUSE_MOVE))},getRootParams:function(a){a=a.parent;for(var c={x:0,y:0,scaleX:1,scaleY:1};a&&"root"!=a;)c.x*=a.scaleX,
c.y*=a.scaleY,c.x+=a.x,c.y+=a.y,c.scaleX*=a.scaleX,c.scaleY*=a.scaleY,a=a.parent;return c},_mouseEnabled:function(a){if(!a||!a.parent||!a.visible||typeof a.mouseEnabled!=UNDEFINED&&!a.mouseEnabled)return!1;for(a=a.parent;a&&"root"!=a;){if(!a.mouseEnabled||!a.mouseChildren||!a.visible)return!1;a=a.parent;if(!a)return!1}return!0},_dispatchEvent:function(a,c,b,e,n,k){for(var f=b.length;n<=k&&n<f;n++)o=b[n],o.sp.objectIndex==e&&(a.currentTarget=a.clickTarget=o.sp,a.target||(a.target=o.sp),a.event_type=
c,a.selfX=(a.offsetX-o.co.x-o.sp.x)/(o.co.scaleX*o.sp.scaleX),a.selfY=(a.offsetY-o.co.y-o.sp.y)/(o.co.scaleY*o.sp.scaleY),o.listener(a,o.sp))},dispatchEvent:function(a,c,b){var e,n,k=[],f,g;f=0;for(g=c.length;f<g;f++)e=c[f].container||c[f],this._mouseEnabled(e)&&(n=this.getRootParams(e),!b&&e.mouseEvent?e.mouseEvent(a,LMouseEvent.MOUSE_DOWN,n):e.ismouseon(a,n)?b==LMouseEvent.MOUSE_OUT||b==LMouseEvent.MOUSE_OVER&&e.ll_mousein||(b!=LMouseEvent.MOUSE_UP&&(e.ll_mousein=!0),k.push({sp:e,co:n,listener:c[f].listener})):
b!=LMouseEvent.MOUSE_OUT&&b!=LMouseEvent.MOUSE_OVER||!e.ll_mousein||(e.ll_mousein=!1,k.push({sp:e,co:n,listener:c[f].listener})));if(0!=k.length)for(1<k.length&&(k=k.sort(this._sort.bind(this))),g=k.length,f=0;f<g;f++)if(c=k[f],this._dispatchEvent(a,b,k,c.sp.objectIndex,f,this.dispatchAllEvent?g-1:f),f<k.length-1&&c.sp.objectIndex==k[f+1].sp.objectIndex)k.splice(f,1),f--;else{for(var h;;){h||(h=c.sp.parent,a.target=c.sp);if(!h||"root"==h)break;this._dispatchEvent(a,b,k,h.objectIndex,f+1,g);a.target=
h;h=h.parent;if(!h||"root"==h)break}if(!this.dispatchAllEvent)break}},set:function(a,c){this.container[a]=c},_sort:function(a,c){var b,e,n=this._getSort(a.sp),k=this._getSort(c.sp),f,g,h;f=0;g=n.length;for(h=k.length;f<g&&f<h;f++)if(b=n[f],e=k[f],b.objectIndex!=e.objectIndex)return e.parent.getChildIndex(e)-b.parent.getChildIndex(b);return k.length-n.length},_getSort:function(a){var c=a.parent;for(a=[a];c&&"root"!=c;)a.unshift(c),c=c.parent;return a}};return new a}(),LKeyboardEvent=function(){throw"LKeyboardEvent cannot be instantiated";
};LKeyboardEvent.KEY_DOWN="keydown";LKeyboardEvent.KEY_UP="keyup";LKeyboardEvent.KEY_PRESS="keypress";var LAccelerometerEvent=function(){throw"LAccelerometerEvent cannot be instantiated";};LAccelerometerEvent.DEVICEMOTION="devicemotion";function LStageAlign(){throw"LStageAlign cannot be instantiated";}LStageAlign.TOP="T";LStageAlign.BOTTOM="B";LStageAlign.LEFT="L";LStageAlign.RIGHT="Re";LStageAlign.TOP_LEFT="TL";LStageAlign.TOP_RIGHT="TR";LStageAlign.TOP_MIDDLE="TM";LStageAlign.BOTTOM_LEFT="BL";
LStageAlign.BOTTOM_RIGHT="BR";LStageAlign.BOTTOM_MIDDLE="BM";LStageAlign.MIDDLE="M";function LStageScaleMode(){throw"LStageScaleMode cannot be instantiated";}LStageScaleMode.EXACT_FIT="exactFit";LStageScaleMode.SHOW_ALL="showAll";LStageScaleMode.NO_BORDER="noBorder";LStageScaleMode.NO_SCALE="noScale";
var LGlobal=function(){function a(){throw"LGlobal cannot be instantiated";}a.FULL_SCREEN="full_screen";a.traceDebug=!1;a.displayState=NONE;a.aspectRatio=NONE;a.canvasObj=null;a.canvas=null;a.webAudio=!0;a.objectIndex=1;a.stage=null;a.width=0;a.height=0;a.box2d=null;a.speed=50;a.IS_MOUSE_DOWN=!1;a.stopPropagation=!1;a.preventDefault=!0;a.childList=[];a.dragList=[];a.excludingContainer=[];a.fpsStatus=null;a.stageScale="noScale";a.align="M";a.mobile=!1;a.canTouch=!1;a.os=OS_PC;a.ios=!1;a.android=!1;
a.android_new=!1;a.backgroundColor=null;a.destroy=!0;a.forceRefresh=!1;a.devicePixelRatio=window.devicePixelRatio||1;a.startTimer=0;a.keepClear=!0;a.top=0;a.left=0;a.window=window;(function(d){var c;c=d.toLowerCase().indexOf("firefox");0>c?c=!1:(c=d.substring(c+8,d.length),c=39>parseFloat(c));a.isOldFirefox=c;0<d.indexOf(OS_IPHONE)?(a.os=OS_IPHONE,a.canTouch=!0,a.ios=!0):0<d.indexOf(OS_IPOD)?(a.os=OS_IPOD,a.canTouch=!0,a.ios=!0):0<d.indexOf(OS_IPAD)?(a.os=OS_IPAD,a.ios=!0,a.canTouch=!0):0<d.indexOf(OS_ANDROID)?
(a.os=OS_ANDROID,a.canTouch=!0,a.android=!0,c=d.indexOf(OS_ANDROID),3<parseInt(d.substr(c+8,1))&&(a.android_new=!0)):0<d.indexOf(OS_WINDOWS_PHONE)?(a.os=OS_WINDOWS_PHONE,a.canTouch=!0):0<d.indexOf(OS_BLACK_BERRY)&&(a.os=OS_BLACK_BERRY,a.canTouch=!0);a.mobile=a.canTouch})(navigator.userAgent);a.setDebug=function(d){a.traceDebug=d};a.setCanvas=function(d,c,b){a.ll_createCanvas(d,c,b);a.ll_createStage();a.displayState==LStage.FULL_SCREEN?a.resize():"number"==typeof a.displayState&&a.resize(a.width*a.displayState,
a.height*a.displayState);a.canTouch?(a.ll_clicks=0,a.ll_prev_clickTime=0,LEvent.addEventListener(a.canvasObj,LMouseEvent.TOUCH_START,a.ll_touchStart),LEvent.addEventListener(document,LMouseEvent.TOUCH_END,a.ll_touchEnd),LEvent.addEventListener(a.canvasObj,LMouseEvent.TOUCH_MOVE,a.ll_touchMove)):(LEvent.addEventListener(a.canvasObj,LMouseEvent.DOUBLE_CLICK,a.ll_mouseDbclick),LEvent.addEventListener(a.canvasObj,LMouseEvent.MOUSE_DOWN,a.ll_mouseDown),LEvent.addEventListener(a.canvasObj,LMouseEvent.MOUSE_MOVE,
a.ll_mouseMove),LEvent.addEventListener(a.canvasObj,LMouseEvent.MOUSE_UP,a.ll_mouseUp),LEvent.addEventListener(a.canvasObj,LMouseEvent.MOUSE_OUT,a.ll_mouseOut))};a.ll_createCanvas=function(d,c,b){a.id=d;a.object=document.getElementById(d);a.object.innerHTML='<div style="position:absolute;margin:0;padding:0;overflow:visible;-webkit-transform:translateZ(0);z-index:0;"><canvas id="'+a.id+'_canvas" style="margin:0;padding:0;width:'+c+"px;height:"+b+'px;"><div id="noCanvas"><p>Hey there,it looks like you\'re using Microsoft\'s Internet Explorer. Microsoft hates the Web and doesn\'t support HTML5:(</p></div></canvas></div><div id="'+
a.id+'_InputText" style="position:absolute;margin:0;padding:0;z-index:10;display:none;"><textarea rows="1" id="'+a.id+'_InputTextareaBox" style="resize:none;background:transparent;border:0px;"></textarea><input type="text" id="'+a.id+'_InputTextBox"  style="background:transparent;border:0px;"/><input type="password" id="'+a.id+'_passwordBox"  style="background:transparent;border:0px;"/></div>';a.canvasObj=document.getElementById(a.id+"_canvas");a._canvas=document.createElement("canvas");a._context=
a._canvas.getContext("2d");a._context&&(a.canvasObj.innerHTML="");a.inputBox=document.getElementById(a.id+"_InputText");a.inputTextareaBoxObj=document.getElementById(a.id+"_InputTextareaBox");a.inputTextBoxObj=document.getElementById(a.id+"_InputTextBox");a.passwordBoxObj=document.getElementById(a.id+"_passwordBox");a.inputTextField=null;c&&(a.canvasObj.width=c);b&&(a.canvasObj.height=b);a.width=a.canvasObj.width;a.height=a.canvasObj.height;a.canvasStyleWidth=a.width;a.canvasStyleHeight=a.height;
a.canvas=a.canvasObj.getContext("2d");a.offsetX=mouseX=0;a.offsetY=mouseY=0};a.ll_createStage=function(){a.stage=new LSprite;a.stage.parent="root";a.childList.push(a.stage);a.stage.baseAddEvent=a.stage.addEventListener;a.stage.baseRemoveEvent=a.stage.removeEventListener;a.stage.addEventListener=function(d,c){d==LEvent.WINDOW_RESIZE||d==LEvent.WINDOW_ORIENTATIONCHANGE?(d==LEvent.WINDOW_RESIZE?a.stage.onresizeListener=c:a.stage.onorientationchangeListener=c,a.stage.onresize||(a.stage.onresize=function(b){a.stage.onresizeEvent=
b},LEvent.addEventListener(a.window,d,a.stage.onresize))):d==LKeyboardEvent.KEY_DOWN||d==LKeyboardEvent.KEY_UP||d==LKeyboardEvent.KEY_PRESS?LEvent.addEventListener(a.window,d,c):a.stage.baseAddEvent(d,c)};a.stage.removeEventListener=function(d,c){if(d==LEvent.WINDOW_RESIZE||d==LEvent.WINDOW_ORIENTATIONCHANGE){if(d==LEvent.WINDOW_RESIZE){if(delete a.stage.onresizeListener,a.stage.onorientationchangeListener)return}else if(delete a.stage.onorientationchangeListener,a.stage.onresizeListener)return;LEvent.removeEventListener(a.window,
LEvent.WINDOW_RESIZE,a.stage.onresize);delete a.stage.onresize}else d==LKeyboardEvent.KEY_DOWN||d==LKeyboardEvent.KEY_UP||d==LKeyboardEvent.KEY_PRESS?LEvent.removeEventListener(a.window,d,c):a.stage.baseRemoveEvent(d,c)};a.innerWidth=window.innerWidth;a.innerHeight=window.innerHeight;LEvent.addEventListener(a.window,"blur",function(){a.stage.dispatchEvent(new LEvent(LFocusEvent.FOCUS_OUT))})};a.ll_touchStart=function(d){a._outStageCheckCount=1;a.IS_MOUSE_DOWN=!0;a.stage.dispatchEvent(new LEvent(LFocusEvent.FOCUS_IN));
a.inputBox.style.display!=NONE&&a.inputTextField._ll_getValue();var c,b,e,n;c=parseInt(0+a.object.style.left)+parseInt(a.canvasObj.style.marginLeft);b=parseInt(0+a.object.style.top)+parseInt(a.canvasObj.style.marginTop);if(LMultitouch.inputMode==LMultitouchInputMode.NONE)e=a.ll_touchStartEvent(d,0,c,b);else if(LMultitouch.inputMode==LMultitouchInputMode.TOUCH_POINT){n=0;for(var k=d.touches.length;n<k;n++)LMultitouch.touchs["touch"+d.touches[n].identifier]||(e=a.ll_touchStartEvent(d,n,c,b))}c=(new Date).getTime();
a.ll_clicks=c<=a.ll_prev_clickTime+500?a.ll_clicks+1:1;a.ll_prev_clickTime=c;2===a.ll_clicks&&(a.mouseEvent(e,LMouseEvent.DOUBLE_CLICK),a.ll_clicks=0);a.mouseJoint_start&&a.mouseJoint_start(e);a.touchHandler(d)};a.ll_touchStartEvent=function(d,c,b,e){d={offsetX:d.touches[c].pageX-b,offsetY:d.touches[c].pageY-e,touchPointID:d.touches[c].identifier,force:d.touches[c].force,rotationAngle:d.touches[c].rotationAngle,radiusX:d.touches[c].radiusX,radiusY:d.touches[c].radiusY};d.offsetX=a.ll_scaleX(d.offsetX);
d.offsetY=a.ll_scaleY(d.offsetY);mouseX=a.offsetX=d.offsetX;mouseY=a.offsetY=d.offsetY;LMultitouch.touchs["touch"+d.touchPointID]=d;a.mouseEvent(d,LMouseEvent.MOUSE_DOWN);return a.buttonStatusEvent=d};a.ll_touchEnd=function(d){var c,b,e,n,k,f;a.IS_MOUSE_DOWN=!1;if(LMultitouch.inputMode==LMultitouchInputMode.TOUCH_POINT)for(e in LMultitouch.touchs){c=LMultitouch.touchs[e];f=!1;n=0;for(k=d.touches.length;n<k;n++)if(d.touches[n].identifier==c.touchPointID){f=!0;break}f||(b=c,delete LMultitouch.touchs[e],
a.mouseEvent(b,LMouseEvent.MOUSE_UP))}b||(b={offsetX:a.offsetX,offsetY:a.offsetY});a.mouseEvent(b,LMouseEvent.MOUSE_UP);a.touchHandler(d);a.buttonStatusEvent=null;a.mouseJoint_end&&a.mouseJoint_end();a.stage.dispatchEvent(new LEvent(LFocusEvent.FOCUS_OUT))};a.ll_touchMove=function(d){var c,b,e,n,k=d.touches.length;c=parseInt(0+a.object.style.left)+parseInt(a.canvasObj.style.marginLeft);b=parseInt(0+a.object.style.top)+parseInt(a.canvasObj.style.marginTop);LMultitouch.inputMode==LMultitouchInputMode.NONE&&
(k=1);i=0;for(n=d.touches.length;i<n&&i<k;i++)e={offsetX:d.touches[i].pageX-c,offsetY:d.touches[i].pageY-b,touchPointID:d.touches[i].identifier},e.offsetX=a.ll_scaleX(e.offsetX),e.offsetY=a.ll_scaleY(e.offsetY),mouseX=a.offsetX=e.offsetX,mouseY=a.offsetY=e.offsetY,LMultitouch.touchs["touch"+e.touchPointID]&&LMultitouch.touchs["touch"+e.touchPointID].offsetX==e.offsetX&&LMultitouch.touchs["touch"+e.touchPointID].offsetY==e.offsetY||(a.buttonStatusEvent=e,LMultitouch.touchs["touch"+e.touchPointID]=
e,a._outStageCheckCount=0>=e.offsetX||e.offsetX>=a.innerWidth||e.offsetX>=a.width||0>=e.offsetY||e.offsetY>=a.innerHeight||e.offsetY>=a.height?0:1,a.mouseEvent(e,LMouseEvent.MOUSE_MOVE));a.touchHandler(d);a.mouseJoint_move&&a.mouseJoint_move(e)};a.ll_mouseDbclick=function(d){null==d.offsetX&&null!=d.layerX&&(d.offsetX=d.layerX,d.offsetY=d.layerY);var c={button:d.button};c.offsetX=a.ll_scaleX(d.offsetX);c.offsetY=a.ll_scaleY(d.offsetY);a.mouseEvent(c,LMouseEvent.DOUBLE_CLICK)};a.ll_mouseDown=function(d){null==
d.offsetX&&null!=d.layerX&&(d.offsetX=d.layerX,d.offsetY=d.layerY);a.inputBox.style.display!=NONE&&a.inputTextField._ll_getValue();var c={button:d.button};c.offsetX=a.ll_scaleX(d.offsetX);c.offsetY=a.ll_scaleY(d.offsetY);a.mouseEvent(c,LMouseEvent.MOUSE_DOWN);a.IS_MOUSE_DOWN=!0;a.mouseJoint_start&&a.mouseJoint_start(c)};a.ll_mouseMove=function(d){null==d.offsetX&&null!=d.layerX&&(d.offsetX=d.layerX,d.offsetY=d.layerY);var c={};c.offsetX=a.ll_scaleX(d.offsetX);c.offsetY=a.ll_scaleY(d.offsetY);a.buttonStatusEvent=
c;mouseX=a.offsetX=c.offsetX;mouseY=a.offsetY=c.offsetY;a.cursor="default";0>=mouseX||mouseX>=a.innerWidth||mouseX>=a.width||0>=mouseY||mouseY>=a.innerHeight||mouseY>=a.height?a._outStageCheckCount&&(a._outStageCheckCount=0,a.stage.dispatchEvent(new LEvent(LFocusEvent.FOCUS_OUT))):a._outStageCheckCount||(a._outStageCheckCount=1,a.stage.dispatchEvent(new LEvent(LFocusEvent.FOCUS_IN)));a.mouseEvent(c,LMouseEvent.MOUSE_MOVE);document.body.style.cursor=a.cursor;a.mouseJoint_move&&a.mouseJoint_move(c)};
a.ll_mouseUp=function(d){null==d.offsetX&&null!=d.layerX&&(d.offsetX=d.layerX,d.offsetY=d.layerY);var c={button:d.button};c.offsetX=a.ll_scaleX(d.offsetX);c.offsetY=a.ll_scaleY(d.offsetY);a.mouseEvent(c,LMouseEvent.MOUSE_UP);a.IS_MOUSE_DOWN=!1;a.mouseJoint_end&&a.mouseJoint_end()};a.ll_mouseOut=function(d){null==d.offsetX&&null!=d.layerX&&(d.offsetX=d.layerX,d.offsetY=d.layerY);var c={};c.offsetX=a.ll_scaleX(d.offsetX);c.offsetY=a.ll_scaleY(d.offsetY);a.mouseEvent(c,LMouseEvent.MOUSE_OUT);a.IS_MOUSE_DOWN=
!1};a.touchHandler=function(d){a.stopPropagation&&(d.stopPropagation(),d.stopImmediatePropagation&&d.stopImmediatePropagation());a.preventDefault&&d.preventDefault();return d};a.mouseEvent=function(d,c){c==LMouseEvent.MOUSE_MOVE&&a.dragHandler(d);if(LMouseEventContainer.container[c])LMouseEventContainer.dispatchMouseEvent(d,c);else for(var b=a.childList.length-1;0<=b&&(!a.childList[b].mouseEvent||!a.childList[b].mouseEvent(d,c));b--);};a.dragHandler=function(d){var c,b,e=a.dragList;for(c=e.length-
1;0<=c;c--)if(b=e[c],!a.canTouch||b.ll_touchPointID==d.touchPointID){d=b.parent.globalToLocal(new LPoint(d.offsetX-b.ll_dragMX+b.ll_dragGlobalPoint.x,d.offsetY-b.ll_dragMY+b.ll_dragGlobalPoint.y));b.x=d.x;b.y=d.y;b.dragRange&&(b.x<b.dragRange.left?b.x=b.dragRange.left:b.x>b.dragRange.right&&(b.x=b.dragRange.right),b.y<b.dragRange.top?b.y=b.dragRange.top:b.y>b.dragRange.bottom&&(b.y=b.dragRange.bottom));break}};a._ll_mobile=function(){var d=.3*a.width,c,b=.05*a.width,e=.05*d,n=.15*d,k=.3*d,f=1.5*d*
.2,g,h,q;g=new LSprite;addChild(g);d=.3*a.width;c=1.5*d;g.graphics.drawRoundRect(1,"#000000",[b,b,d,c,b],!0,"#cccccc");g.graphics.drawRoundRect(1,"#000000",[b+e,b+e,d-2*e,c-2*e,b],!0,"#000000");g.graphics.drawRect(1,"#ffffff",[b+n,b+f,d-2*n,c-2*f],!0,"#ffffff");g.graphics.drawArc(1,"#ffffff",[b+.5*d,b+c-3.5*e,1.5*e,0,2*Math.PI]);g.graphics.drawRoundRect(1,"#ffffff",[b+k,b+n,d-2*k,e,.5*e]);h=new LSprite;h.x=.5*-(d-2*n);h.y=.5*-e;h.graphics.drawRect(1,"#ff0000",[0,0,d-2*n,e],!0,"#ff0000");q=new LSprite;
q.y=.5*-(d-2*n);q.x=.5*-e;q.graphics.drawRect(1,"#ff0000",[0,0,e,d-2*n],!0,"#ff0000");e=new LSprite;e.x=b+k+.5*(d-2*k);e.y=b+f+.5*(c-2*f);e.rotate=45;e.addChild(h);e.addChild(q);g.addChild(e);d=new LSprite;d.graphics.drawVertices(2,"#000000",[[0,0],[n,n],[0,2*n]],!0,"#cccccc");d.x=1.5*b+c;d.y=1.5*b+.5*c;addChild(d);g.arrow=d;window.onorientationchange=function(){setTimeout(function(){location.href=location.href},100)};return g};a.verticalError=function(){var d=.3*a.width,c=.05*a.width,b=a._ll_mobile(),
e=b.clone();e.getChildAt(0).visible=!1;e.x=.5*a.width+c;addChild(e);b.rotate=90;b.x=.5*a.width+c;b.y=.5*d};a.horizontalError=function(){var d=.3*a.width,c=.05*a.width,b=a._ll_mobile(),e=b.clone();e.getChildAt(0).visible=!1;e.rotate=90;e.x=a.width-c;e.y=.5*d;addChild(e);b.arrow.x=1.5*c+d};a.onShow=function(){if(null!=a.canvas){0>=a._outStageCheckCount&&(a._outStageCheckCount--,-2>a._outStageCheckCount&&(a.stage.dispatchEvent(new LEvent(LFocusEvent.FOCUS_OUT)),a._outStageCheckCount=1));a.fpsStatus&&
a.fpsStatus.reset();if(a.stage.onresizeEvent){if(a.stage.onresizeListener)a.stage.onresizeListener(a.stage.onresizeEvent);if(a.stage.onorientationchangeListener)a.stage.onorientationchangeListener({orientation:window.innerWidth>window.innerHeight?LANDSCAPE:PORTRAIT});delete a.stage.onresizeEvent}a.forceRefresh&&(a.canvasObj.width=a.canvasObj.width,a.forceRefresh=!1);a.canvas.beginPath();null!=a.box2d?(a.box2d.ll_show(),!a.traceDebug&&a.keepClear&&a.canvas.clearRect(0,0,a.width+1,a.height+1)):(a.keepClear&&
a.canvas.clearRect(0,0,a.width+1,a.height+1),null!==a.backgroundColor&&(a.canvas.fillStyle=a.backgroundColor,a.canvas.fillRect(0,0,a.width,a.height)));a.show(a.childList,a.canvas)}};a.show=function(d,c){c=c||a.canvas;for(var b=0,e=d.length,n;b<e;b++)(n=d[b])&&n.ll_show&&(n.ll_show(c),n._ll_removeFromSelf&&(b--,e--))};a.divideCoordinate=function(a,c,b,e){var n;a/=e;var k=c/b,f=[],g;for(c=0;c<b;c++){g=[];for(n=0;n<e;n++)g.push({x:a*n,y:k*c,width:a,height:k});f.push(g)}return f};a._create_loading_color=
function(){var d=a.canvas.createRadialGradient(a.width/2,a.height,0,a.width/2,0,a.height);d.addColorStop(0,"red");d.addColorStop(.3,"orange");d.addColorStop(.4,"yellow");d.addColorStop(.5,"green");d.addColorStop(.8,"blue");d.addColorStop(1,"violet");return d};a.hitPolygon=function(a,c,b){var e=0,n=a[0],k=c<=n[0],f=b<=n[1],g,h,q,t,r;g=1;for(h=a.length;g<h+1;g++)q=a[g%h],t=c<=q[0],r=b<=q[1],f!=r&&(k==t?k&&(e+=f?-1:1):c<=n[0]+(q[0]-n[0])*(b-n[1])/(q[1]-n[1])&&(e+=f?-1:1)),n=q,k=t,f=r;return 0!=e};a.hitTestPolygon=
function(a,c){var b,e,n,k,f,g=[[a,[],[]],[c,[],[]]];for(e=0;e<g.length;e++){k=g[e][0];f=g[e][1];b=0;for(n=k.length;b<n;b++)g[e][2].push(new LVec2(k[b][0],k[b][1])),b<n-1&&f.push((new LVec2(k[b+1][0]-k[b][0],k[b+1][1]-k[b][1])).normL());f.push((new LVec2(k[0][0]-k[n-1][0],k[0][1]-k[n-1][1])).normL())}for(e=0;e<g.length;e++)for(f=g[e][1],b=0,n=f.length;b<n;b++){k=LVec2.getMinMax(g[0][2],f[b]);var h=LVec2.getMinMax(g[1][2],f[b]);if(k.max_o<h.min_o||k.min_o>h.max_o)return!1}return!0};a.hitTestPolygonArc=
function(d,c){if(a.hitPolygon(d,c[0],c[1]))return!0;var b,e,n,k,f,g;b=0;for(n=d.length;b<n;b++)if(e=b<n-1?b+1:0,k=d[b],f=d[e],e=new LVec2(c[0]-k[0],c[1]-k[1]),k=new LVec2(f[0]-k[0],f[1]-k[1]),g=k.normalize(),f=LVec2.dot(e,g),0>=f){if(e.x*e.x+e.y*e.y<c[3])return!0}else if(f*f<k.x*k.x+k.y*k.y&&(e=LVec2.cross(e,g),e*e<c[3]))return!0;return!1};a.hitTestArc=function(a,c,b,e){var n=.5*a.getWidth(),k=.5*c.getWidth(),f=a._startX?a._startX():a.startX(),g=c._startX?c._startX():c.startX();a=a._startY?a._startY():
a.startY();c=c._startY?c._startY():c.startY();typeof b!=UNDEFINED&&(f+=n-b,a+=n-b,n=b);typeof e!=UNDEFINED&&(g+=k-e,c+=k-e,k=e);b=f+n-g-k;e=a+n-c-k;return b*b+e*e<(n+k)*(n+k)};a.hitTestRect=function(a,c,b,e){var n=a.getWidth(),k=c.getWidth(),f=a.getHeight(),g=c.getHeight(),h=a._startX?a._startX():a.startX(),q=c._startX?c._startX():c.startX();a=a._startY?a._startY():a.startY();c=c._startY?c._startY():c.startY();typeof b!=UNDEFINED&&(h+=.5*(n-b[0]),a+=.5*(f-b[1]),n=b[0],f=b[1]);typeof e!=UNDEFINED&&
(q+=.5*(k-e[0]),c+=.5*(g-e[1]),k=e[0],g=e[1]);return(h>q?h:q)<=(h+n>q+k?q+k:h+n)&&(a>c?a:c)<=(a+f>c+g?c+g:a+f)};a.hitTest=a.hitTestRect;a.setFrameRate=function(d){a.frameRate&&clearInterval(a.frameRate);a.speed=d;a.frameRate=setInterval(function(){a.onShow()},d)};a.ll_scaleX=function(d){return(d-a.left)*a.width/a.canvasStyleWidth};a.ll_scaleY=function(d){return(d-a.top)*a.height/a.canvasStyleHeight};a.ll_setStageSize=function(d,c){d=Math.ceil(d);c=Math.ceil(c);a.canvasObj.style.width=d+"px";a.canvasObj.style.height=
c+"px";a.canvasStyleWidth=d;a.canvasStyleHeight=c};a.resize=function(d,c){var b,e,n=0,k=0,f=window.innerWidth,g=window.innerHeight;a.innerWidth=f;a.innerHeight=g;d&&(b=d);c&&(e=c);"noScale"==a.stageScale&&(b=d||a.width,e=c||a.height);switch(a.stageScale){case "exactFit":b=d||f;e=c||g;break;case "noBorder":b=d||f;e=c||a.height*f/a.width;switch(a.align){case LStageAlign.BOTTOM:case LStageAlign.BOTTOM_LEFT:case LStageAlign.BOTTOM_RIGHT:case LStageAlign.BOTTOM_MIDDLE:n=g-e}break;case "showAll":f/g>a.width/
a.height?(e=c||g,b=d||a.width*g/a.height):(b=d||f,e=c||a.height*f/a.width);default:switch(a.align){case LStageAlign.BOTTOM:case LStageAlign.BOTTOM_LEFT:n=g-e;break;case LStageAlign.RIGHT:case LStageAlign.TOP_RIGHT:k=f-b;break;case LStageAlign.TOP_MIDDLE:k=.5*(f-b);break;case LStageAlign.BOTTOM_RIGHT:n=g-e;k=f-b;break;case LStageAlign.BOTTOM_MIDDLE:n=g-e;k=.5*(f-b);break;case LStageAlign.MIDDLE:n=.5*(g-e),k=.5*(f-b)}}a.canvasObj.style.marginTop=n+"px";a.canvasObj.style.marginLeft=k+"px";a.isOldFirefox&&
(a.left=parseInt(a.canvasObj.style.marginLeft),a.top=parseInt(a.canvasObj.style.marginTop));a.ll_setStageSize(b,e)};a.sleep=function(a){for(var c=new Date;(new Date).getTime()-c.getTime()<a;);};a.screen=function(d){a.displayState=d;a.stage&&("number"==typeof a.displayState?a.resize(a.width*a.displayState,a.height*a.displayState):a.resize())};return a}(),LSystem=LGlobal,LStage=LGlobal;
Array.prototype.indexOf||(Array.prototype.indexOf=function(a,d){var c=this.length>>>0,b=Number(d)||0,b=0>b?Math.ceil(b):Math.floor(b);for(0>b&&(b+=c);b<c;b++)if(b in this&&this[b]===a)return b;return-1});Array.isArray||(Array.isArray=function(a){return"[object Array]"==Object.prototype.toString.apply(a)});
Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!==typeof this)throw new TypeError("Function.prototype.bind-what is trying to be bound is not callable");var d=Array.prototype.slice.call(arguments,1),c=this,b=function(){},e=function(){return c.apply(this instanceof b&&a?this:a,d.concat(Array.prototype.slice.call(arguments)))};b.prototype=this.prototype;e.prototype=new b;return e});
Array.prototype.find||(Array.prototype.find=function(a,d){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!==typeof a)throw new TypeError("predicate must be a function");for(var c=Object(this),b=c.length>>>0,e,n=0;n<b;n++)if(e=c[n],a.call(d,e,n,c))return e});
Array.prototype.findIndex||(Array.prototype.findIndex=function(a,d){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!==typeof a)throw new TypeError("predicate must be a function");for(var c=Object(this),b=c.length>>>0,e,n=0;n<b;n++)if(e=c[n],a.call(d,e,n,c))return n;return-1});
Array.prototype.forEach||(Array.prototype.forEach=function(a,d){var c,b;if(null==this)throw new TypeError(" this is null or not defined");var e=Object(this),n=e.length>>>0;if("function"!==typeof a)throw new TypeError(a+" is not a function");1<arguments.length&&(c=d);for(b=0;b<n;){var k;b in e&&(k=e[b],a.call(c,k,b,e));b++}});
Array.prototype.every||(Array.prototype.every=function(a,d){var c,b;if(null==this)throw new TypeError("this is null or not defined");var e=Object(this),n=e.length>>>0;if("function"!==typeof a)throw new TypeError;1<arguments.length&&(c=d);for(b=0;b<n;){var k;if(b in e&&(k=e[b],!a.call(c,k,b,e)))return!1;b++}return!0});
Array.prototype.some||(Array.prototype.some=function(a){if(null==this)throw new TypeError("Array.prototype.some called on null or undefined");if("function"!==typeof a)throw new TypeError;for(var d=Object(this),c=d.length>>>0,b=2<=arguments.length?arguments[1]:void 0,e=0;e<c;e++)if(e in d&&a.call(b,d[e],e,d))return!0;return!1});String.format||(String.format=function(a){var d=Array.prototype.slice.call(arguments,1);return a.replace(/{(\d+)}/g,function(a,b){return"undefined"!=typeof d[b]?d[b]:a})});
void 0===Function.prototype.name&&void 0!==Object.defineProperty&&Object.defineProperty(Function.prototype,"name",{get:function(){var a=/function\s([^(]{1,})\(/.exec(this.toString());return a&&1<a.length?a[1].trim():""},set:function(a){}});
function trace(){if(LGlobal.traceDebug){var a=document.getElementById("traceObject"),d;if(0<trace.arguments.length&&null==a){var c=document.createElement("DIV");c.position=0;c.style.position="absolute";document.body.appendChild(c);a=document.createElement("TEXTAREA");a.id="traceObject";a.style.width=.5*window.innerWidth+"px";a.style.height="200px";d=document.createElement("BUTTON");d.style.width=.25*window.innerWidth+"px";d.innerHTML="Hide";c.appendChild(d);LEvent.addEventListener(d,LGlobal.mobile?
"touchstart":"click",function(b){a.style.display="none"==a.style.display?"":"none"});d=document.createElement("BUTTON");d.style.width=.25*window.innerWidth+"px";d.innerHTML="position";c.appendChild(d);var b=function(b){c.position++;0==c.position?(c.style.top="5px",c.style.left="5px"):1==c.position?(c.style.top=window.innerHeight-20-parseInt(a.style.height)+"px",c.style.left="5px"):2==c.position?(c.style.top="5px",c.style.left=window.innerWidth-parseInt(a.style.width)+"px"):(c.style.top=window.innerHeight-
20-parseInt(a.style.height)+"px",c.style.left=window.innerWidth-parseInt(a.style.width)+"px",c.position=-1)};b();LEvent.addEventListener(d,LGlobal.mobile?"touchstart":"click",b);c.appendChild(document.createElement("BR"));c.appendChild(a)}for(d=0;d<trace.arguments.length;d++)a.value=a.value+trace.arguments[d]+"\r\n",a.scrollTop=a.scrollHeight}}window.console||(window.console={log:trace,warn:trace});function addChild(a){LGlobal.stage.addChild(a)}
function removeChild(a){LGlobal.stage.removeChild(a)}
function init(a,d,c,b,e,n){LGlobal.speed=a;var k=function(){LGlobal.canTouch&&LGlobal.aspectRatio==LANDSCAPE&&window.innerWidth<window.innerHeight?LGlobal.horizontalError():LGlobal.canTouch&&LGlobal.aspectRatio==PORTRAIT&&window.innerWidth>window.innerHeight?LGlobal.verticalError():setTimeout(e,100);LGlobal.startTimer=(new Date).getTime()},f;"function"==typeof a?(LGlobal.setCanvas(d,c,b),k(),f=function(){a(f);LGlobal.onShow()}):f=function(){LGlobal.frameRate=setInterval(function(){LGlobal.onShow()},
a);LGlobal.setCanvas(d,c,b);k()};null!=n&&n==LEvent.INIT?f():LEvent.addEventListener(window,"load",function(){f()})}var LInit=init;
function base(a,d,c){var b=null,e=a.constructor.prototype,n={};"Object"==a.constructor.name&&console.warn("When you use the extends. You must make a method like 'XX.prototype.xxx=function(){}'. but not 'XX.prototype={xxx:function(){}}'.");typeof a.__ll__parent__==UNDEFINED&&(a.__ll__parent__=[],a.__ll__parent__=[]);a.__ll__parent__.push(d.prototype);for(b in e)n[b]=1;for(b in d.prototype)n[b]||(e[b]=d.prototype[b]);e.toString==Object.prototype.toString&&(e.toString=LObject.prototype.toString);d.apply(a,
c)}var LExtends=base;function getTimer(){return(new Date).getTime()-LGlobal.startTimer}function getExtension(a){a=a.match(/([^#?]+\.)([^.#?]+)/);return 3<=a.length?a[2].toLowerCase():null}
var LObject=function(){function a(){this.type="LObject";this.objectindex=this.objectIndex=++LGlobal.objectIndex}a.prototype={callParent:function(a,c){if(a&&c){var b=!1,e,n="__ll__parent_call"+a;"undefined"==typeof this[n]?(b=!0,this[n]=0):this[n]++;if(this[n]>=this.__ll__parent__.length)return!1;e=this.__ll__parent__[this[n]][a]?this.__ll__parent__[this[n]][a].apply(this,c):this.callParent(a,c);b&&delete this[n];return e}},copyProperty:function(a){for(var c in a)"number"==typeof a[c]||"string"==typeof a[c]||
"boolean"==typeof a[c]?"objectindex"!=c&&"objectIndex"!=c&&(this[c]=a[c]):Array.isArray(a[c])&&(this[c]=a[c].slice());a.mask&&(this.mask=a.mask.clone())},toString:function(){return"[object "+this.constructor.name+"]"}};return a}(),LTimer=function(){function a(c,b){LExtends(this,LEventDispatcher,[]);this.type="LTimer";this.delay=c;this.repeatCount=b?b:Number.MAX_VALUE;this.running=!1;this.currentCount=0;this.reset();a.TimerManager.add(this)}a.TimerManager=function(){function a(){this.childList=[]}
a.prototype={ll_show:function(){for(var b,e=0;e<this.childList.length;e++)(b=this.childList[e])&&b.ll_show()},add:function(b){this.childList.push(b)},remove:function(b){var e=this.childList,a,c;a=0;for(c=e.length;a<c;a++)if(b.objectIndex==e[a].objectIndex){this.childList.splice(a,1);break}}};return new a}();p={start:function(){this.running=!0},stop:function(){this.running=!1},reset:function(){this.currentCount=this.currentTime=0;this.stop()},destroy:function(){a.TimerManager.remove(this)},ll_show:function(){!this.running||
this.currentCount>=this.repeatCount||(this.currentTime+=LGlobal.speed,this.currentTime<this.delay||(this.currentTime=0,this.currentCount++,this.dispatchEvent(LTimerEvent.TIMER),this.currentCount>=this.repeatCount&&this.dispatchEvent(LTimerEvent.TIMER_COMPLETE)))}};for(var d in p)a.prototype[d]=p[d];LGlobal.childList.push(a.TimerManager);return a}(),LColorTransform=function(){return function(a,d,c,b,e,n,k,f){LExtends(this,LObject,[]);this.redMultiplier=a;this.greenMultiplier=d;this.blueMultiplier=
c;this.alphaMultiplier=b;this.redOffset=e;this.greenOffset=n;this.blueOffset=k;this.alphaOffset=f}}(),LTransform=function(){return function(){LExtends(this,LObject,[]);this.matrix=null}}(),LMatrix=function(){function a(b,e,a,c,d,g,h,q,t){LExtends(this,LObject,[]);this.a=1;this.c=this.u=this.b=0;this.d=1;this.ty=this.tx=this.v=0;this.w=1;typeof b!=UNDEFINED&&(this.a=b);typeof e!=UNDEFINED&&(this.b=e);typeof a!=UNDEFINED&&(this.c=a);typeof c!=UNDEFINED&&(this.d=c);typeof d!=UNDEFINED&&(this.tx=d);typeof g!=
UNDEFINED&&(this.ty=g);typeof h!=UNDEFINED&&(this.u=h);typeof q!=UNDEFINED&&(this.v=q);typeof t!=UNDEFINED&&(this.w=t)}var d={setTo:function(b,e,a,c,d,g,h,q,t){typeof b!=UNDEFINED&&(this.a=b);typeof e!=UNDEFINED&&(this.b=e);typeof a!=UNDEFINED&&(this.c=a);typeof c!=UNDEFINED&&(this.d=c);typeof d!=UNDEFINED&&(this.tx=d);typeof g!=UNDEFINED&&(this.ty=g);typeof h!=UNDEFINED&&(this.u=h);typeof q!=UNDEFINED&&(this.v=q);typeof t!=UNDEFINED&&(this.w=t);return this},isIdentity:function(){return 1==this.a&&
0==this.b&&0==this.c&&1==this.d&&0==this.tx&&0==this.ty&&0==u&&0==v&&1==w},transform:function(b){b.transform(this.a,this.b,this.c,this.d,this.tx,this.ty);return this},identity:function(){this.setTo(1,0,0,1,0,0,0,0,1)},rotate:function(b){var e=b*Math.PI/180;b=Math.cos(e);e=Math.sin(e);b=new a(b,e,-e,b,0,0,0,0,1);this.add(b);return this},scale:function(b,e){var n=new a(b,0,0,e,0,0,0,0,1);this.add(n);return this},translate:function(b,e){var n=new a(1,0,0,1,b,e,0,0,1);this.add(n);return this},skew:function(b,
e){var n=new a(1,e,b,1,0,0,0,0,1);this.add(n);return this},add:function(b){this.setTo(this.a*b.a+this.b*b.c+this.u*b.tx,this.a*b.b+this.b*b.d+this.u*b.ty,this.c*b.a+this.d*b.c+this.v*b.tx,this.c*b.b+this.d*b.d+this.v*b.ty,this.tx*b.a+this.ty*b.c+this.w*b.tx,this.tx*b.b+this.ty*b.d+this.w*b.ty,this.a*b.u+this.b*b.v+this.u*b.w,this.c*b.u+this.d*b.v+this.v*b.w,this.tx*b.u+this.ty*b.v+this.w*b.w)},toArray:function(b){return Array.isArray(b)&&3==b.length?[b[0]*this.a+b[1]*this.c+b[2]*this.tx,b[0]*this.b+
b[1]*this.d+b[2]*this.ty,b[0]*this.u+b[1]*this.v+b[2]*this.w]:[this.a*b.a+this.b*b.c+this.u*b.tx,this.a*b.b+this.b*b.d+this.u*b.ty,this.c*b.a+this.d*b.c+this.v*b.tx,this.c*b.b+this.d*b.d+this.v*b.ty,this.tx*b.a+this.ty*b.c+this.w*b.tx,this.tx*b.b+this.ty*b.d+this.w*b.ty,this.a*b.u+this.b*b.v+this.u*b.w,this.c*b.u+this.d*b.v+this.v*b.w,this.tx*b.u+this.ty*b.v+this.w*b.w]},clone:function(){return new a(this.a,this.b,this.c,this.d,this.tx,this.ty,this.u,this.v,this.w)}},c;for(c in d)a.prototype[c]=d[c];
return a}(),LVec2=function(){function a(a,c){this.x=a||0;this.y=c||0}a.dot=function(a,c){return a.x*c.x+a.y*c.y};a.cross=function(a,c){return a.x*c.y-a.y*c.x};a.distance=function(a,c){var b=a.x-c.x,e=a.y-c.y;return Math.sqrt(b*b+e*e)};a.getMinMax=function(d,c){for(var b=a.dot(d[0],c),e=a.dot(d[0],c),n=0,k=0,f=1;f<d.length;f++){var g=a.dot(d[f],c);b>g&&(b=g,n=f);e<g&&(e=g,k=f)}return{min_o:b,min_i:n,max_o:e,max_i:k}};a.prototype={length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){var d=
this.length();return new a(this.x/d,this.y/d)},normR:function(){return new a(-this.y,this.x)},normL:function(){return new a(this.y,-this.x)}};return a}(),LEventDispatcher=function(){function a(){LExtends(this,LObject,[]);this._eventList=[]}var d={addEventListener:function(b,e){this._eventList.push({listener:e,type:b})},removeEventListener:function(b,e){var a,c;c=this._eventList.length;for(a=0;a<c;a++)if(this._eventList[a]&&b==this._eventList[a].type&&(!e||this._eventList[a].listener==e)){this._eventList.splice(a,
1);break}},removeAllEventListener:function(){this._eventList=[]},dispatchEvent:function(b){var e,a=this._eventList.length,c="string"==typeof b?b:b.eventType;for(e=0;e<a;e++)if(this._eventList[e]&&c==this._eventList[e].type){if("string"==typeof b)this.currentTarget=this.target=this,this.eventType=this.event_type=c,this._eventList[e].listener(this),delete this.currentTarget,delete this.target,delete this.eventType;else if(b.target||(b.target=this),b.currentTarget||(b.currentTarget=b.target),b._ll_preventDefault=
!1,this._eventList[e].listener(b),b._ll_preventDefault)break;return!0}return!1},hasEventListener:function(b,e){var a,c=this._eventList.length;for(a=0;a<c;a++)if(this._eventList[a]&&b==this._eventList[a].type&&(typeof e==UNDEFINED||e==this._eventList[a].listener))return!0;return!1}},c;for(c in d)a.prototype[c]=d[c];return a}(),LDisplayObject=function(){function a(){LExtends(this,LEventDispatcher,[]);this.name="instance"+this.objectIndex;this.height=this.width=this.y=this.x=0;this.alpha=this.scaleY=
this.scaleX=1;this.visible=!0;this.rotate=0;this.filters=this.blendMode=this.mask=null;this.transform=new LTransform;this.parent=null}var d={_createCanvas:function(){this._canvas||(this._canvas=document.createElement("canvas"),this._context=this._canvas.getContext("2d"))},ll_show:function(b){b=b||LGlobal.canvas;this._canShow()&&(this._ll_trans=!1,LGlobal.box2d||"function"!=typeof this._ll_loopframe||this._ll_loopframe(),b.save(),this._showReady(b),this.blendMode&&(b.globalCompositeOperation=this.blendMode),
this.filters&&this._ll_setFilters(b),this._rotateReady(),null!=this.mask&&this.mask.ll_show&&(this.mask.ll_show(b),b.clip()),this._transformRotate(b),this._transformScale(b),this._coordinate(b),this.transform.matrix&&this.transform.matrix.transform(b),1>this.alpha&&(this._ll_trans=!0,b.globalAlpha*=this.alpha),LGlobal.fpsStatus&&(LGlobal.fpsStatus.display++,this._ll_trans&&LGlobal.fpsStatus.transform++),this._ll_cacheAsBitmap?this._ll_cacheAsBitmap._ll_show(b):this._ll_show(b),b.restore(),null!=LGlobal.box2d&&
"function"==typeof this._ll_loopframe&&this._ll_loopframe())},_canShow:function(){return this.visible},_coordinate:function(b){if(0!=this.x||0!=this.y)this._ll_trans=!0,b.transform(1,0,0,1,this.x,this.y)},_rotateReady:function(){},_showReady:function(b){},_ll_show:function(b){},_ll_setFilters:function(b){var e=this.filters,a,c;if(e)for(a=0,c=e.length;a<c;a++)e[a].ll_show(this,b)},startX:function(){return 0},startY:function(){return 0},getWidth:function(){return 1},getHeight:function(){return 1},_transformRotate:function(b){b=
b||LGlobal.canvas;0!=this.rotate&&(this._ll_trans=!0,rotateFlag=Math.PI/180,rotateObj=new LMatrix,typeof this.rotatex==UNDEFINED&&(this.rotatey=this.rotatex=0),this.box2dBody&&(rotateFlag=1),rotateObj.a=Math.cos(this.rotate*rotateFlag),rotateObj.b=Math.sin(this.rotate*rotateFlag),rotateObj.c=-rotateObj.b,rotateObj.d=rotateObj.a,rotateObj.tx=this.x+this.rotatex,rotateObj.ty=this.y+this.rotatey,rotateObj.transform(b).setTo(1,0,0,1,-rotateObj.tx,-rotateObj.ty).transform(b))},_transformScale:function(b){var e;
b=b||LGlobal.canvas;if(1!=this.scaleX||1!=this.scaleY)this._ll_trans=!0,e=new LMatrix,1!=this.scaleX&&(e.tx=this.x),1!=this.scaleY&&(e.ty=this.y),e.a=this.scaleX,e.d=this.scaleY,e.transform(b).setTo(1,0,0,1,-e.tx,-e.ty).transform(b)},getAbsoluteScale:function(){var b,e,a;b=this.scaleX;e=this.scaleY;for(a=this.parent;a&&"root"!=a;)b*=a.scaleX,e*=a.scaleY,a=a.parent;return{scaleX:b,scaleY:e}},getRootCoordinate:function(){return this.localToGlobal(new LPoint(0,0))},localToGlobal:function(b){m=this.getRootMatrix();
b=m.toArray([b.x,b.y,1]);return new LPoint(b[0],b[1])},globalToLocal:function(b){m=this.getLocalMatrix();b=m.toArray([b.x,b.y,1]);return new LPoint(b[0],b[1])},getBounds:function(b){if(typeof b==UNDEFINED)return new LRectangle(0,0,0,0);var e=0,a=0,c=0,d=0;this.objectIndex!=b.objectIndex&&(a=this.getRootCoordinate(),b=b.getRootCoordinate(),e=a.x-b.x,a=a.y-b.y);c=this.getWidth();d=this.getHeight();return new LRectangle(e,a,c,d)},cacheAsBitmap:function(b){if(b){b=this.x-this.startX();var e=this.y-this.startY(),
a=this.getDataCanvas(b,e,this.getWidth(),this.getHeight()),a=new LBitmapData(a,0,0,null,null,LBitmapData.DATA_CANVAS),a=new LBitmap(a);a.x=-b;a.y=-e;this._ll_cacheAsBitmap=a}else this._ll_cacheAsBitmap=null},getDataCanvas:function(b,e,a,c){var d,g;this._createCanvas();d=this.x;g=this.y;this.x=b||0;this.y=e||0;this.width=a||this.getWidth();this.height=c||this.getHeight();this._canvas.width=this.width;this._canvas.height=this.height;this.ll_show(this._context);this.x=d;this.y=g;return this._canvas},
getDataURL:function(){var b=this.getDataCanvas();return b.toDataURL.apply(b,arguments)},ismouseonShapes:function(b,e,a){var c,d,g,h;typeof b==UNDEFINED&&(b=this.shapes);c=this.getRootMatrix();for(g=b.length-1;0<=g;g--)if(d=b[g],h=d.arg,h=this._changeShape(d.type,h,c),d.type==LShape.VERTICES){if(LGlobal.hitPolygon(h,e,a))return!0}else if(d.type==LShape.RECT){if(LGlobal.hitPolygon(h,e,a))return!0}else if(d.type==LShape.ARC&&(h[0]-e)*(h[0]-e)+(h[1]-a)*(h[1]-a)<h[3])return!0;return!1},_changeShape:function(b,
e,a){var c,d;if(b==LShape.VERTICES)for(c=[],b=0,d=e.length;b<d;b++)c[b]=a.toArray([e[b][0],e[b][1],1]);else if(b==LShape.RECT)for(c=[[e[0],e[1]],[e[0]+e[2],e[1]],[e[0]+e[2],e[1]+e[3]],[e[0],e[1]+e[3]]],b=0,d=c.length;b<d;b++)c[b]=a.toArray([c[b][0],c[b][1],1]);else b==LShape.ARC&&(c=a.toArray([e[0],e[1],1]),e=a.toArray([e[0]+e[2],e[1],1]),e=(c[0]-e[0])*(c[0]-e[0])+(c[1]-e[1])*(c[1]-e[1]),c=[c[0],c[1],Math.sqrt(e),e]);return c},getRootMatrix:function(){for(var b=this,e=new LMatrix;b&&"root"!=b;)1==
b.scaleX&&1==b.scaleY||e.scale(b.scaleX,b.scaleY),0!=b.rotate&&e.rotate(b.rotate),0==b.x&&0==b.y||e.translate(b.x,b.y),b=b.parent;return e},getLocalMatrix:function(){for(var b=this,e=new LMatrix,a=[];b&&"root"!=b;)a.push(b),b=b.parent;for(var c=a.length-1;0<=c;c--)b=a[c],0==b.x&&0==b.y||e.translate(-b.x,-b.y),0!=b.rotate&&e.rotate(-b.rotate),1==b.scaleX&&1==b.scaleY||e.scale(1/b.scaleX,1/b.scaleY);return e},remove:function(){var b=this.parent;b&&"root"!=b&&(b.removeChild(this),this._ll_removeFromSelf=
!0)}},c;for(c in d)a.prototype[c]=d[c];return a}(),LInteractiveObject=function(){function a(){LExtends(this,LDisplayObject,[]);this.type="LInteractiveObject";this.mouseEnabled=!0;this.mouseList=[]}var d={addEventListener:function(b,e){0<=b.indexOf("mouse")||0<=b.indexOf("touch")||b==LMouseEvent.DOUBLE_CLICK?LMouseEventContainer.container[b]||(b==LMouseEvent.MOUSE_OVER||b==LMouseEvent.MOUSE_OUT)&&LMouseEventContainer.container[LMouseEvent.MOUSE_MOVE]?LMouseEventContainer.addMouseEvent(this,b,e):this.mouseList.push({listener:e,
type:b}):this._eventList.push({listener:e,type:b})},removeEventListener:function(b,e){var a,c;if(0<=b.indexOf("mouse")||0<=b.indexOf("touch")||b==LMouseEvent.DOUBLE_CLICK)if(LMouseEventContainer.container[b]||(b==LMouseEvent.MOUSE_OVER||b==LMouseEvent.MOUSE_OUT)&&LMouseEventContainer.container[LMouseEvent.MOUSE_MOVE])LMouseEventContainer.removeMouseEvent(this,b,e);else for(c=this.mouseList.length,a=0;a<c;a++){if(this.mouseList[a]&&b==this.mouseList[a].type&&this.mouseList[a].listener==e){this.mouseList.splice(a,
1);break}}else return this.callParent("removeEventListener",arguments)},removeAllEventListener:function(){this.mouseList.length=0;this._eventList.length=0;LMouseEventContainer.container[LMouseEvent.MOUSE_DOWN]&&LMouseEventContainer.removeMouseEvent(this,LMouseEvent.MOUSE_DOWN);LMouseEventContainer.container[LMouseEvent.MOUSE_UP]&&LMouseEventContainer.removeMouseEvent(this,LMouseEvent.MOUSE_UP);LMouseEventContainer.container[LMouseEvent.MOUSE_MOVE]&&(LMouseEventContainer.removeMouseEvent(this,LMouseEvent.MOUSE_MOVE),
LMouseEventContainer.removeMouseEvent(this,LMouseEvent.MOUSE_OVER),LMouseEventContainer.removeMouseEvent(this,LMouseEvent.MOUSE_OUT))},hasEventListener:function(b,e){var a,c;if(LMouseEventContainer.container[b])return LMouseEventContainer.hasEventListener(this,b,e);if(0<=b.indexOf("mouse")||0<=b.indexOf("touch")||b==LMouseEvent.DOUBLE_CLICK)for(c=this.mouseList.length,a=0;a<c;a++){if(this.mouseList[a]&&b==this.mouseList[a].type&&(!e||this.mouseList[a].listener==e))return!0}else return this.callParent("hasEventListener",
arguments);return!1}},c;for(c in d)a.prototype[c]=d[c];return a}(),LDisplayObjectContainer=function(){function a(){LExtends(this,LInteractiveObject,[]);this.childList=[];this.numChildren=0;this.mouseChildren=!0}var d={addChild:function(b){var e;b.parent&&(e=LGlobal.destroy,LGlobal.destroy=!1,b.parent.removeChild(b),LGlobal.destroy=e);b.parent=this;this.childList.push(b);this.numChildren=this.childList.length;this._ll_removeFromSelf=!1;return b},addChildAt:function(b,e){var a;if(!(0>e||e>this.childList.length))return"function"==
typeof b.remove&&(a=LGlobal.destroy,LGlobal.destroy=!1,b.remove(),LGlobal.destroy=a),b.parent=this,this.childList.splice(e,0,b),this.numChildren=this.childList.length,this._ll_removeFromSelf=!1,b},removeChild:function(b){var e=this.childList,a,c;a=0;for(c=e.length;a<c;a++)if(b.objectIndex==e[a].objectIndex){LGlobal.destroy&&b.die&&b.die();this.childList.splice(a,1);break}this.numChildren=this.childList.length;delete b.parent},getChildAt:function(b){var e=this.childList;return 0==e.length||e.length<=
b?null:e[b]},getChildByName:function(b){var e=this.childList,a,c;a=0;for(c=e.length;a<c;a++)if(e[a]&&e[a].name==b)return e[a];return null},removeChildAt:function(b){var a=this.childList;if(!(a.length<=b))return LGlobal.destroy&&a[b].die&&a[b].die(),b=this.childList.splice(b,1),this.numChildren=this.childList.length,b},getChildIndex:function(b){if(!b)return-1;var a=this.childList,c,d=a.length;for(c=0;c<d;c++)if(a[c].objectIndex==b.objectIndex)return c;return-1},setChildIndex:function(b,a){var c=this.childList,
d,f=c.length;if("root"==b.parent||b.parent.objectIndex!=this.objectIndex||0>a||a>=f)return-1;for(d=0;d<f&&c[d].objectIndex!=b.objectIndex;d++);this.childList.splice(d,1);this.childList.splice(a,0,b);return a},resize:function(){this.width=this.getWidth();this.height=this.getHeight()},removeAllChild:function(){var b=this.childList,a,c;a=0;for(c=b.length;a<c;a++)LGlobal.destroy&&b[a].die&&b[a].die();this.numChildren=this.height=this.width=this.childList.length=0}},c;for(c in d)a.prototype[c]=d[c];return a}(),
LLoader=function(){function a(){LExtends(this,LEventDispatcher,[]);this.type="LLoader"}a.TYPE_BITMAPDATE="bitmapData";a.prototype.load=function(d,c){var b=this;c||(c=a.TYPE_BITMAPDATE);b.loadtype=c;c==a.TYPE_BITMAPDATE&&(b.content=new Image,b.content.onload=function(){b.content.onload=null;var a=new LEvent(LEvent.COMPLETE);a.currentTarget=b;a.target=b.content;b.dispatchEvent(a);delete b.content},b.content.src=d)};return a}(),LURLLoader=function(){function a(){LExtends(this,LEventDispatcher,[]);this.type=
"LURLLoader";this.loadtype="";this.content=null;this.event={}}a.TYPE_TEXT="text";a.TYPE_JS="js";a.prototype.load=function(d,c){var b=this,e,n;c||(n=getExtension(d),"txt"==n?c=a.TYPE_TEXT:"js"==n&&(c=a.TYPE_JS));b.loadtype=c;c==a.TYPE_TEXT?LAjax.get(d,{},function(a){e=new LEvent(LEvent.COMPLETE);b.data=a;e.currentTarget=b;e.target=a;b.dispatchEvent(e);delete b.content;delete b.data}):c==a.TYPE_JS&&(n=document.createElement("script"),n.onload=function(){e=new LEvent(LEvent.COMPLETE);e.currentTarget=
b;e.target=b;b.dispatchEvent(e);delete b.content},n.src=d,n.type="text/javascript",document.querySelector("head").appendChild(n))};return a}(),LFontLoader=function(){function a(){LExtends(this,LEventDispatcher,[]);this.type="LFontLoader"}a.TYPE_FONT="font";a.prototype.load=function(a,c){var b=this,e,n,k,f,g;f="";e=document.createElement("style");f=a.split(",");for(var h=0;h<f.length;h++)g=f[h].split("."),g=g[g.length-1],"ttf"==g?n=f[h]:"eot"==g&&(k=f[h]);f="@font-face{font-family:'"+c+"';";k&&(f+=
"src:url("+k+");");n&&(f+="src:local('lufy'),url("+n+")format('opentype');");e.innerHTML=f;document.querySelector("head").appendChild(e);setTimeout(function(){var a=new LEvent(LEvent.COMPLETE);a.currentTarget=b;a.target=b;b.dispatchEvent(a)},1)};return a}(),LWebAudio=function(){function a(){LExtends(this,LEventDispatcher,[]);this.loopIndex=this.loopEnd=this.loopStart=this.length=this.currentSave=this.currentStart=this.currentTime=0;this.loopLength=1;this.playing=!1;this.volume=1;LSound.Container.add(this)}
a.container=[];a.containerCount=0;try{a.audioTag=new Audio}catch(d){console.warn("ReferenceError:Can't find variable:Audio"),a.audioTag={canPlayType:function(){return!1}}}a._context=null;var c={getWebAudio:function(){var b;if(0<a.containerCount)b=a.container.shift();else if(typeof AudioContext!==UNDEFINED)try{b=new AudioContext}catch(c){a.containerCount=a.container.length,b=a.container.shift()}else if(typeof webkitAudioContext!==UNDEFINED)try{b=new webkitAudioContext}catch(d){a.containerCount=a.container.length,
b=a.container.shift()}else throw"AudioContext not supported.:(";b.createGainNode||(b.createGainNode=b.createGain);a.container.push(b);return b},onload:function(b){"[object AudioBuffer]"!==Object.prototype.toString.apply(b)?this.load(b):(this.data||(this.data=this.getWebAudio()),this.buffer=b,this.length=this.buffer.duration,b=new LEvent(LEvent.COMPLETE),b.currentTarget=this,b.target=this.buffer,this.dispatchEvent(b))},_onended:function(){this.dispatchEvent(LEvent.SOUND_COMPLETE);this.close();++this.loopIndex<
this.loopLength&&this.play(this.currentStart,void 0,this.currentTimeTo)},load:function(b){var c=this;if("string"!==typeof b)if("[object AudioBuffer]"==Object.prototype.toString.apply(b))c.onload(b);else"[object ArrayBuffer]"==Object.prototype.toString.apply(b)&&(c.data||(c.data=c.getWebAudio()),c.data.decodeAudioData(b,c.onload.bind(c),function(b){throw"AudioContext decodeAudioData error:"+b.toString();}));else{var d,f,g,h={mov:["quicktime"],"3gp":["3gpp"],midi:["midi"],mid:["midi"],ogv:["ogg"],m4a:["acc"],
mp3:["mpeg"],wav:["wav","x-wav","wave"],wave:["wav","x-wav","wave"],aac:["mp4","aac"]};b=b.split(",");for(g=0;g<b.length;g++)if(d=b[g].split("."),f=d[d.length-1],f=h[f]?h[f]:[f],f=f.some(function(b,e,d){return a.audioTag.canPlayType(c._type+"/"+b)})){LAjax.responseType=LAjax.ARRAY_BUFFER;LAjax.get(b[g],{},c.onload.bind(c));break}else console.warn("Not support "+d[d.length-1]+":"+b[g]),d=new LEvent(LEvent.COMPLETE),d.currentTarget=d.target=c,c.dispatchEvent(d)}},getCurrentTime:function(){return this.playing?
this.data.currentTime-this.currentSave+this.currentTime:this.currentSave},setVolume:function(b){this.volume=b;this.playing&&(this.volumeNode.gain.value=b)},getVolume:function(){return this.volume},play:function(b,a,c){0!=this.length&&(typeof a!==UNDEFINED&&(this.loopIndex=0,this.loopLength=a),typeof b!==UNDEFINED&&(this.currentStart=this.currentTime=b),this.currentTimeTo=typeof c!==UNDEFINED?c>this.length?this.length:c:this.length,this.data.loop=!1,this.playing=!0,this.timeout&&(clearTimeout(this.timeout),
delete this.timeout),this.timeout=setTimeout(this._onended.bind(this),1E3*(this.currentTimeTo-this.currentTime)),this.bufferSource=this.data.createBufferSource(),this.bufferSource.buffer=this.buffer,this.volumeNode=this.data.createGainNode(),this.volumeNode.gain.value=this.volume,this.volumeNode.connect(this.data.destination),this.bufferSource.connect(this.volumeNode),this.currentSave=this.data.currentTime,this.bufferSource.start?this.bufferSource.start(0,this.currentTime,this.length-this.currentTime):
this.bufferSource.noteGrainOn(0,this.currentTime,this.length-this.currentTime))},playSegment:function(b,a,c){this.playTo(b,b+a,c)},playTo:function(b,a,c){this.play(b,c,a)},stop:function(){this.playing&&(this.timeout&&(clearTimeout(this.timeout),delete this.timeout),this.bufferSource.stop?this.bufferSource.stop(0):this.bufferSource.noteOff(0),this.currentTime=this.currentSave=this.getCurrentTime(),this.playing=!1)},close:function(){this.playing&&(this.timeout&&(clearTimeout(this.timeout),delete this.timeout),
this.bufferSource.stop?this.bufferSource.stop(0):this.bufferSource.noteOff(0),this.playing=!1,this.currentSave=this.currentTime=0)},ll_check:function(){this.playing&&this.currentTimeTo<this.data.currentTime-this.currentSave+.001*LSound.Container.time&&this._onended()},die:function(){LSound.Container.remove(this)}},b;for(b in c)a.prototype[b]=c[b];return a}(),LMedia=function(){function a(){LExtends(this,LDisplayObject,[]);this.loopIndex=this.length=0;this.loopLength=1;this.playing=!1;this.onsoundcomplete=
this.oncomplete=null;this.currentStart=0;LSound.Container.add(this)}var d={onload:function(){var b=this;if(b.data.readyState){b.length=b.data.duration-(LGlobal.android?.1:0);var a=new LEvent(LEvent.COMPLETE);a.currentTarget=b;a.target=b.data;b.dispatchEvent(a)}else b.data.addEventListener("canplaythrough",function(){b.onload()},!1)},_onended:function(){var b;this.dispatchEvent(LEvent.SOUND_COMPLETE);++this.loopIndex<this.loopLength?(b=this.loopIndex,this.close(),this.play(this.currentStart,this.loopLength,
this.currentTimeTo),this.loopIndex=b):this.close()},load:function(b){var a=this;if("[object HTMLAudioElement]"==Object.prototype.toString.apply(b))a.data=b,a.onload();else{var c,d,f,g={mov:["quicktime"],"3gp":["3gpp"],midi:["midi"],mid:["midi"],ogv:["ogg"],m4a:["acc"],mp3:["mpeg"],wav:["wav","x-wav","wave"],wave:["wav","x-wav","wave"],aac:["mp4","aac"]};b=b.split(",");for(f=0;f<b.length;f++){c=b[f].split(".");d=c[c.length-1];d=g[d]?g[d]:[d];if(d=d.some(function(b,c,n){return a.data.canPlayType(a._type+
"/"+b)})){a.data.src=b[f];a.onload();a.data.load();return}console.warn("Not support "+c[c.length-1]+":"+b[f]);c=new LEvent(LEvent.COMPLETE);c.currentTarget=c.target=a;a.dispatchEvent(c)}if(a.oncomplete)a.oncomplete({})}},getCurrentTime:function(){return this.data.currentTime},setVolume:function(b){this.data.volume=b},getVolume:function(){return this.data.volume},play:function(b,a,c){var d=this;0!=d.length&&(LGlobal.android&&LSound.Container.stopOther(this),typeof b!=UNDEFINED&&(d.data.currentTime=
b,d.currentStart=b),typeof a!=UNDEFINED&&(d.loopLength=a),d.currentTimeTo=typeof c!==UNDEFINED?c>d.length?d.length:c:d.length,d.timeout&&(clearTimeout(d.timeout),delete d.timeout),d.timeout=setTimeout(function(){d._onended()},1E3*(d.currentTimeTo-d.data.currentTime)),d.data.loop=!1,d.loopIndex=0,d.playing=!0,d.data.play())},playSegment:function(b,a,c){this.playTo(b,b+a,c)},playTo:function(b,a,c){this.play(b,c,a)},stop:function(){this.playing&&(this.timeout&&(clearTimeout(this.timeout),delete this.timeout),
this.playing=!1,this.data.pause())},close:function(){this.playing&&(this.timeout&&(clearTimeout(this.timeout),delete this.timeout),this.playing=!1,this.data.pause(),this.currentSave=this.data.currentTime=0)},ll_check:function(){this.playing&&(this.data.duration!=this._ll_duration&&(this._ll_duration=this.data.duration,this.length=this.data.duration-(LGlobal.android?.1:0)),this.currentTimeTo<this.data.currentTime+.005*LSound.Container.time&&this._onended())},die:function(){LSound.Container.remove(this)}},
c;for(c in d)a.prototype[c]=d[c];return a}(),LSound=function(){function a(b){this.type="LSound";this._type="audio";if(a.webAudioEnabled&&LGlobal.webAudio)LExtends(this,LWebAudio,[]);else{LExtends(this,LMedia,[]);try{this.data=new Audio}catch(c){console.warn("ReferenceError:Can't find variable:Audio"),this.data={}}this.data.loop=!1;this.data.autoplay=!1}b&&this.load(b)}a.TYPE_SOUND="sound";a.webAudioEnabled=!1;var d=location.protocol;if("http:"==d||"https:"==d){if(typeof AudioContext!==UNDEFINED)try{LWebAudio._context=
new AudioContext}catch(c){}else if(typeof webkitAudioContext!==UNDEFINED)try{LWebAudio._context=new webkitAudioContext}catch(b){}LWebAudio._context&&(LWebAudio.container.push(LWebAudio._context),a.webAudioEnabled=!0)}a.Container={ll_save:0,time:0,list:[],ll_show:function(){var b=a.Container,c=(new Date).getTime();b.time=c-(b.ll_save?b.ll_save:c);b.ll_save=c;b=b.list;for(c=b.length-1;0<=c;c--)b[c]&&b[c].ll_check()},add:function(b){0<=a.Container.list.indexOf(b)||a.Container.list.push(b)},remove:function(b){for(var c=
a.Container.list,d=c.length-1;0<=d;d--)if(c[d].objectIndex==b.objectIndex){c.splice(d,1);break}},stopOther:function(b){for(var c=a.Container.list,d=c.length-1;0<=d;d--)c[d].objectIndex!=b.objectIndex&&c[d].stop()}};LGlobal.childList.push(a.Container);return a}(),LVideo=function(){function a(b){LExtends(this,LMedia,[]);this.type="LVideo";this._type="video";this.rotatey=this.rotatex=0;this.data=document.createElement("video");this.data.style.display="none";document.body.appendChild(this.data);this.data.id=
"video_"+this.objectIndex;this.data.loop=!1;this.data.autoplay=!1;b&&this.load(b)}var d={_ll_show:function(b){b.drawImage(this.data,this.x,this.y)},die:function(){document.body.removeChild(this.data);delete this.data},getWidth:function(){return this.data.width},getHeight:function(){return this.data.height}},c;for(c in d)a.prototype[c]=d[c];return a}(),LPoint=function(){function a(a,c){this.x=a;this.y=c}a.distance=function(d,c){return a.distance2(d.x,d.y,c.x,c.y)};a.distance2=function(a,c,b,e){a-=
b;c-=e;return Math.sqrt(a*a+c*c)};a.interpolate=function(d,c,b){return new a(d.x+(c.x-d.x)*(1-b),d.y+(c.y-d.y)*(1-b))};a.polar=function(d,c){return new a(d*Math.cos(c),d*Math.sin(c))};a.prototype={toString:function(){return"[object LPoint("+this.x+","+this.y+")]"},length:function(){return a.distance2(this.x,this.y,0,0)},add:function(d){return new a(this.x+d.x,this.y+d.y)},clone:function(){return new a(this.x,this.y)},setTo:function(a,c){this.x=a;this.y=c},copyFrom:function(a){this.setTo(a.x,a.y)},
equals:function(a){return this.x==a.x&&this.y==a.y},normalize:function(a){a/=this.length();this.x*=a;this.y*=a},offset:function(a,c){this.x+=a;this.y+=c},subtract:function(d){return new a(this.x-d.x,this.y-d.y)}};return a}(),LRectangle=function(){function a(a,c,b,e){this.x=a;this.y=c;this.width=b;this.height=e;this.setRectangle()}a.prototype={setRectangle:function(){this.bottom=this.y+this.height;this.right=this.x+this.width;this.left=this.x;this.top=this.y},clone:function(){return new a(this.x,this.y,
this.width,this.height)},contains:function(a,c){return a>=this.x&&a<=this.right&&c>=this.y&&c<=this.bottom},containsRect:function(a){return a.x>=this.x&&a.right<=this.right&&a.y>=this.y&&a.bottom<=this.bottom},equals:function(a){return a.x==this.x&&a.width==this.width&&a.y==this.y&&a.height==this.height},inflate:function(a,c){this.width+=a;this.height+=c;this.setRectangle()},intersection:function(d){var c=this.x>d.x?this.x:d.x,b=this.y>d.y?this.y:d.y,e=this.right>d.right?d.right:this.right;d=this.bottom>
d.bottom?d.bottom:this.bottom;return c<=e&&b<=d?new a(c,b,e,d):new a(0,0,0,0)},intersects:function(a){var c=this.y>a.y?this.y:a.y,b=this.bottom>a.bottom?a.bottom:this.bottom;return(this.x>a.x?this.x:a.x)<=(this.right>a.right?a.right:this.right)&&c<=b},isEmpty:function(){return 0==this.x&&0==this.y&&0==this.width&&0==this.height},offset:function(a,c){this.x+=a;this.y+=c;this.setRectangle()},setEmpty:function(){this.height=this.width=this.y=this.x=0;this.setRectangle()},setTo:function(a,c,b,e){this.x=
a;this.y=c;this.width=b;this.height=e;this.setRectangle()},toString:function(){return"[object LRectangle("+this.x+","+this.y+","+this.width+","+this.height+")]"},union:function(d){return new a(this.x>d.x?d.x:this.x,this.y>d.y?d.y:this.y,this.right>d.right?this.right:d.right,this.bottom>d.bottom?this.bottom:d.bottom)}};return a}(),LGraphics=function(){function a(){LExtends(this,LObject,[]);this.type="LGraphics";this.color="#000000";this.alpha=1;this.bitmap=null;this.setList=[];this.showList=[]}var d=
{ll_show:function(b){var a,c=this.setList.length;if(0!=c)for(a=0;a<c;a++)this.setList[a](b),LGlobal.fpsStatus&&LGlobal.fpsStatus.graphics++},clone:function(){var b=new a,e,c,d;b.color=this.color;b.alpha=this.alpha;b.bitmap=this.bitmap;e=0;for(c=this.setList.length;e<c;e++)d=this.setList[e],b.setList.push(d);e=0;for(c=this.showList.length;e<c;e++)d=this.showList[e],b.showList.push(d);return b},lineCap:function(b){this.setList.push(function(a){a.lineCap=b})},lineJoin:function(b){this.setList.push(function(a){a.lineJoin=
b})},lineWidth:function(b){this.setList.push(function(a){a.lineWidth=b})},strokeStyle:function(b){this.setList.push(function(a){a.strokeStyle=b})},stroke:function(){this.setList.push(function(b){b.stroke()})},beginPath:function(){this.setList.push(function(b){b.beginPath()})},closePath:function(){this.setList.push(function(b){b.closePath()})},moveTo:function(b,a){this.setList.push(function(c){c.moveTo(b,a)});this.showList.push({type:LShape.POINT,arg:[b,a]})},lineTo:function(b,a){this.setList.push(function(c){c.lineTo(b,
a)});this.showList.push({type:LShape.POINT,arg:[b,a]})},rect:function(b,a,c,d){this.setList.push(function(f){f.rect(b,a,c,d)});this.showList.push({type:LShape.RECT,arg:[b,a,c,d]})},fillStyle:function(b){this.setList.push(function(a){a.fillStyle=b})},fill:function(){this.setList.push(function(b){b.fill()})},arc:function(b,a,c,d,f,g){this.setList.push(function(h){h.arc(b,a,c,d,f,g)});this.showList.push({type:LShape.ARC,arg:d})},lineStyle:function(b,a){null==a&&(a=this.color);this.color=a;this.setList.push(function(c){c.lineWidth=
b;c.strokeStyle=a})},clear:function(){this.bitmap=null;this.setList.length=0;this.showList.length=0},beginBitmapFill:function(b){var a=this;a.setList.push(function(){a.bitmap=b})},drawEllipse:function(b,a,c,d,f){var g=this;g.setList.push(function(h){var q,t,r,x,y,z,A,B;h.beginPath();q=c[0];t=c[1];r=c[2];x=c[3];y=r/2*.5522848;z=x/2*.5522848;A=q+r;B=t+x;r=q+r/2;x=t+x/2;h.moveTo(q,x);h.bezierCurveTo(q,x-z,r-y,t,r,t);h.bezierCurveTo(r+y,t,A,x-z,A,x);h.bezierCurveTo(A,x+z,r+y,B,r,B);h.bezierCurveTo(r-
y,B,q,x+z,q,x);g.bitmap?(h.save(),h.clip(),h.drawImage(g.bitmap.image,g.bitmap.x,g.bitmap.y,g.bitmap.width,g.bitmap.height,0,0,g.bitmap.width,g.bitmap.height),h.restore(),g.bitmap=null):(d&&(h.fillStyle=f,h.fill()),0<b&&(h.lineWidth=b,h.strokeStyle=a,h.stroke()))});g.showList.push({type:LShape.RECT,arg:c})},drawArc:function(b,a,c,d,f){var g=this;g.setList.push(function(h){h.beginPath();6<c.length&&c[6]&&h.moveTo(c[0],c[1]);h.arc(c[0],c[1],c[2],c[3],c[4],c[5]);6<c.length&&c[6]&&h.lineTo(c[0],c[1]);
g.bitmap?(h.save(),h.clip(),h.drawImage(g.bitmap.image,g.bitmap.x,g.bitmap.y,g.bitmap.width,g.bitmap.height,0,0,g.bitmap.width,g.bitmap.height),h.restore(),g.bitmap=null):(d&&(h.fillStyle=f,h.fill()),0<b&&(h.lineWidth=b,h.strokeStyle=a,h.stroke()))});g.showList.push({type:LShape.ARC,arg:c})},drawRect:function(b,a,c,d,f){var g=this;g.setList.push(function(h){h.beginPath();h.rect(c[0],c[1],c[2],c[3]);h.closePath();g.bitmap?(h.save(),h.clip(),h.drawImage(g.bitmap.image,g.bitmap.x,g.bitmap.y,g.bitmap.width,
g.bitmap.height,0,0,g.bitmap.width,g.bitmap.height),h.restore(),g.bitmap=null):(d&&(h.fillStyle=f,h.fill()),0<b&&(h.lineWidth=b,h.strokeStyle=a,h.stroke()))});g.showList.push({type:LShape.RECT,arg:c})},drawRoundRect:function(b,a,c,d,f){var g=this;g.setList.push(function(h){h.beginPath();h.moveTo(c[0]+c[4],c[1]);h.lineTo(c[0]+c[2]-c[4],c[1]);h.arcTo(c[0]+c[2],c[1],c[0]+c[2],c[1]+c[4],c[4]);h.lineTo(c[0]+c[2],c[1]+c[3]-c[4]);h.arcTo(c[0]+c[2],c[1]+c[3],c[0]+c[2]-c[4],c[1]+c[3],c[4]);h.lineTo(c[0]+c[4],
c[1]+c[3]);h.arcTo(c[0],c[1]+c[3],c[0],c[1]+c[3]-c[4],c[4]);h.lineTo(c[0],c[1]+c[4]);h.arcTo(c[0],c[1],c[0]+c[4],c[1],c[4]);h.closePath();g.bitmap?(h.save(),h.clip(),h.drawImage(g.bitmap.image,0,0,g.bitmap.width,g.bitmap.height,0,0,g.bitmap.width,g.bitmap.height),h.restore(),g.bitmap=null):(d&&(h.fillStyle=f,h.fill()),0<b&&(h.lineWidth=b,h.strokeStyle=a,h.stroke()))});g.showList.push({type:LShape.RECT,arg:c})},drawVertices:function(b,a,c,d,f){var g=this;3>c.length||(g.setList.push(function(h){h.beginPath();
h.moveTo(c[0][0],c[0][1]);var q,t=c.length,r;for(q=1;q<t;q++)r=c[q],h.lineTo(r[0],r[1]);h.lineTo(c[0][0],c[0][1]);h.closePath();g.bitmap?(h.save(),h.clip(),h.drawImage(g.bitmap.image,g.bitmap.x,g.bitmap.y,g.bitmap.width,g.bitmap.height,0,0,g.bitmap.width,g.bitmap.height),h.restore(),g.bitmap=null):(d&&(h.fillStyle=f,h.fill()),0<b&&(h.lineWidth=b,h.strokeStyle=a,h.closePath(),h.stroke()))}),g.showList.push({type:LShape.VERTICES,arg:c}))},drawTriangles:function(b,a,c,d,f){var g=this,h,q,t=a.length;
g.setList.push(function(r){var x;for(q=h=0;h<t;h+=3){r.save();r.beginPath();r.moveTo(b[2*a[h]],b[2*a[h]+1]);r.lineTo(b[2*a[h+1]],b[2*a[h+1]+1]);r.lineTo(b[2*a[h+2]],b[2*a[h+2]+1]);r.lineTo(b[2*a[h]],b[2*a[h]+1]);r.closePath();d&&(r.lineWidth=d,r.strokeStyle=f,r.stroke());r.clip();if(0==h%6){var y=(c[2*a[h+1+q]]-c[2*a[h+q]])*g.bitmap.width,z=(c[2*a[h+2]+1]-c[2*a[h]+1])*g.bitmap.height;if(0==q&&0>y){for(x=h+9;x<t;x+=3)if(c[2*a[h+2]+1]==c[2*a[x+2]+1]){q=x-h;break}0==q&&(q=t-h);y=(c[2*a[h+1+q]]-c[2*a[h+
q]])*g.bitmap.width}h+q>=t?(y=(c[2*a[h+q-t]]-c[2*a[h+1]])*g.bitmap.width,x=1==c[2*a[h]]?0:g.bitmap.width*c[2*a[h]]+y,x>g.bitmap.width&&(x-=g.bitmap.width)):x=g.bitmap.width*c[2*a[h+q]];sh=g.bitmap.height*c[2*a[h]+1];0>z&&(z=(c[2*a[h+2-(0<h?6:-6)]+1]-c[2*a[h-(0<h?6:-6)]+1])*g.bitmap.height,sh=0);var A=(b[2*a[h+1]]-b[2*a[h]])/y,B=(b[2*a[h+1]+1]-b[2*a[h]+1])/y,C=(b[2*a[h+2]]-b[2*a[h]])/z,D=(b[2*a[h+2]+1]-b[2*a[h]+1])/z;r.transform(A,B,C,D,b[2*a[h]],b[2*a[h]+1]);r.drawImage(g.bitmap.image,g.bitmap.x+
x,g.bitmap.y+sh,y,z,0,0,y,z)}else{y=(c[2*a[h+2+q]]-c[2*a[h+1+q]])*g.bitmap.width;z=(c[2*a[h+2]+1]-c[2*a[h]+1])*g.bitmap.height;if(0==q&&0>y){for(x=h+9;x<t;x+=3)if(c[2*a[h+2]+1]==c[2*a[x+2]+1]){q=x-h;break}0==q&&(q=t-h);y=(c[2*a[h+2+q]]-c[2*a[h+1+q]])*g.bitmap.width}h+1+q>=t?(y=(c[2*a[h+1+q-t]]-c[2*a[h+2]])*g.bitmap.width,x=1==c[2*a[h+1]]?0:g.bitmap.width*c[2*a[h+1]]+y,x>g.bitmap.width&&(x-=g.bitmap.width)):x=g.bitmap.width*c[2*a[h+1+q]];sh=g.bitmap.height*c[2*a[h]+1];0>z&&(z=(c[2*a[h+2-(0<h?6:-6)]+
1]-c[2*a[h-(0<h?6:-6)]+1])*g.bitmap.height,sh=0);A=(b[2*a[h+2]]-b[2*a[h+1]])/y;B=(b[2*a[h+2]+1]-b[2*a[h+1]+1])/y;C=(b[2*a[h+2]]-b[2*a[h]])/z;D=(b[2*a[h+2]+1]-b[2*a[h]+1])/z;r.transform(A,B,C,D,b[2*a[h+1]],b[2*a[h+1]+1]);r.drawImage(g.bitmap.image,g.bitmap.x+x,g.bitmap.y+sh,y,z,0,-z,y,z)}r.restore()}})},drawLine:function(b,a,c){this.setList.push(function(d){d.beginPath();d.moveTo(c[0],c[1]);d.lineTo(c[2],c[3]);d.lineWidth=b;d.strokeStyle=a;d.closePath();d.stroke()});this.showList.push({type:LShape.LINE,
arg:c})},add:function(b){this.setList.push(b)},ismouseon:function(b,a){return null!=b&&b!=UNDEFINED&&0!=this.showList.length&&this.parent?this.parent.ismouseonShapes(this.showList,b.offsetX,b.offsetY):!1},getWidth:function(){var b,a,c,d,f,g,h;b=0;for(g=this.showList.length;b<g;b++)if(this.showList[b].type==LShape.RECT){if(c>this.showList[b].arg[0]||typeof c==UNDEFINED)c=this.showList[b].arg[0];if(d<this.showList[b].arg[0]+this.showList[b].arg[2]||typeof d==UNDEFINED)d=this.showList[b].arg[0]+this.showList[b].arg[2]}else if(this.showList[b].type==
LShape.ARC){if(c>this.showList[b].arg[0]-this.showList[b].arg[2]||typeof c==UNDEFINED)c=this.showList[b].arg[0]-this.showList[b].arg[2];if(d<this.showList[b].arg[0]+this.showList[b].arg[2]||typeof d==UNDEFINED)d=this.showList[b].arg[0]+this.showList[b].arg[2]}else if(this.showList[b].type==LShape.VERTICES)for(a=0,h=this.showList[b].arg.length;a<h;a++){f=this.showList[b].arg[a];if(c>f[0]||typeof c==UNDEFINED)c=f[0];if(d<f[0]||typeof d==UNDEFINED)d=f[0]}else if(this.showList[b].type==LShape.LINE){if(c>
this.showList[b].arg[0]||typeof c==UNDEFINED)c=this.showList[b].arg[0];if(c>this.showList[b].arg[2]||typeof c==UNDEFINED)c=this.showList[b].arg[2];if(d<this.showList[b].arg[0]||typeof d==UNDEFINED)d=this.showList[b].arg[0];if(d<this.showList[b].arg[2]||typeof d==UNDEFINED)d=this.showList[b].arg[2]}else if(this.showList[b].type==LShape.POINT){if(c>this.showList[b].arg[0]||typeof c==UNDEFINED)c=this.showList[b].arg[0];if(d<this.showList[b].arg[0]||typeof d==UNDEFINED)d=this.showList[b].arg[0]}typeof c==
UNDEFINED&&(c=d=0);this.left=c;0<g&&d==c&&(d=c+1);return d-c},getHeight:function(){var b=null,a=null,c,d,f,g,h,b=0;for(c=this.showList.length;b<c;b++)if(this.showList[b].type==LShape.RECT){if(f>this.showList[b].arg[1]||typeof f==UNDEFINED)f=this.showList[b].arg[1];if(g<this.showList[b].arg[1]+this.showList[b].arg[3]||typeof g==UNDEFINED)g=this.showList[b].arg[1]+this.showList[b].arg[3]}else if(this.showList[b].type==LShape.ARC){if(f>this.showList[b].arg[1]-this.showList[b].arg[2]||typeof f==UNDEFINED)f=
this.showList[b].arg[1]-this.showList[b].arg[2];if(g<this.showList[b].arg[1]+this.showList[b].arg[2]||typeof g==UNDEFINED)g=this.showList[b].arg[1]+this.showList[b].arg[2]}else if(this.showList[b].type==LShape.VERTICES)for(a=0,d=this.showList[b].arg.length;a<d;a++){h=this.showList[b].arg[a];if(f>h[1]||typeof f==UNDEFINED)f=h[1];if(g<h[1]||typeof g==UNDEFINED)g=h[1]}else if(this.showList[b].type==LShape.LINE){if(f>this.showList[b].arg[1]||typeof f==UNDEFINED)f=this.showList[b].arg[1];if(f>this.showList[b].arg[3]||
typeof f==UNDEFINED)f=this.showList[b].arg[3];if(g<this.showList[b].arg[1]||typeof g==UNDEFINED)g=this.showList[b].arg[1];if(g<this.showList[b].arg[3]||typeof g==UNDEFINED)g=this.showList[b].arg[3]}else if(this.showList[b].type==LShape.POINT){if(f>this.showList[b].arg[1]||typeof f==UNDEFINED)f=this.showList[b].arg[1];if(g<this.showList[b].arg[1]||typeof g==UNDEFINED)g=this.showList[b].arg[1]}typeof f==UNDEFINED&&(f=g=0);this.top=f;0<c&&g==f&&(g=f+1);return g-f},startX:function(){this.getWidth();return this.left},
startY:function(){this.getHeight();return this.top}},c;for(c in d)a.prototype[c]=d[c];return a}(),LShape=function(){function a(){LExtends(this,LInteractiveObject,[]);this.type="LShape";this.graphics=new LGraphics;this.graphics.parent=this}a.POINT="point";a.LINE="line";a.ARC="arc";a.RECT="rect";a.VERTICES="vertices";var d={_ll_show:function(b){this.graphics.ll_show(b)},getWidth:function(b){var a,c=this.graphics.startX(),d=c+this.graphics.getWidth();b&&this.mask&&(b=this.mask._startX?this.mask._startX():
this.mask.startX(),a=this.mask.getWidth(),c<b&&(c=b),d>b+a&&(d=b+a));this.ll_left=this.x+c;this.ll_right=this.x+d;return(d-c)*this.scaleX},getHeight:function(b){var a,c=this.graphics.startY(),d=c+this.graphics.getHeight();b&&this.mask&&(b=this.mask._startY?this.mask._startY():this.mask.startY(),a=this.mask.getHeight(),c<b&&(c=b),d>b+a&&(d=b+a));this.ll_top=this.y+c;this.ll_bottom=this.y+d;return(d-c)*this.scaleY},_startX:function(){this.getWidth();return this.ll_left},startX:function(){return this._startX()*
this.scaleX},_startY:function(){this.getHeight();return this.ll_top},startY:function(){return this._startY()*this.scaleY},clone:function(){var b=new a;b.copyProperty(this);b.graphics=this.graphics.clone();return b.graphics.parent=b},ismouseon:function(b,a){var c=!1,d;if(!this.visible||null==b||this.mask&&(this.mask.parent||(this.mask.parent=this.parent),!this.mask.ismouseon(b,a)))return!1;d={x:this.x*a.scaleX+a.x,y:this.y*a.scaleY+a.y,scaleX:a.scaleX*this.scaleX,scaleY:a.scaleY*this.scaleY};this.graphics&&
(c=this.graphics.ismouseon(b,d));return c},die:function(){this.graphics.clear()}},c;for(c in d)a.prototype[c]=d[c];return a}(),LSprite=function(){function a(){LExtends(this,LDisplayObjectContainer,[]);this.type="LSprite";this.rotatex;this.rotatey;this.graphics=new LGraphics;this.graphics.parent=this;this.box2dBody=null;this.shapes=[];this.useCursor=this.dragRange=null}var d={setRotate:function(b){this.box2dBody?this.box2dBody.SetAngle(b):this.rotate=b},_rotateReady:function(){this.box2dBody&&(typeof this.rotatex==
UNDEFINED&&this.getRotateXY(),this.x=this.box2dBody.GetPosition().x*LGlobal.box2d.drawScale-this.parent.x-this.rotatex,this.y=this.box2dBody.GetPosition().y*LGlobal.box2d.drawScale-this.parent.y-this.rotatey,this.rotate=this.box2dBody.GetAngle())},_ll_show:function(b){this.graphics.ll_show(b);LGlobal.show(this.childList,b);this._ll_debugShape(b)},startDrag:function(b){this.ll_dragStart||(this.ll_touchPointID=b,this.ll_dragGlobalPoint=this.parent.localToGlobal(new LPoint(this.x,this.y)),this.ll_dragMX=
mouseX,this.ll_dragMY=mouseY,this.ll_dragStart=!0,LGlobal.dragList.push(this))},stopDrag:function(){var b,a;b=0;for(a=LGlobal.dragList.length;b<a;b++)if(this.objectIndex==LGlobal.dragList[b].objectIndex){this.ll_dragStart=!1;LGlobal.dragList.splice(b,1);break}},getRotateXY:function(b,a){b&&a||(b=this.getWidth(),a=this.getHeight());this.rotatex=b/2;this.rotatey=a/2},getWidth:function(b){var a,c,d,f,g=this.graphics.startX(),h=g+this.graphics.getWidth();a=0;for(c=this.childList.length;a<c;a++)d=this.childList[a],
typeof d.visible!=UNDEFINED&&d.visible&&(f=d.x,"function"==typeof d._startX&&(f=d._startX()),d=f+d.getWidth(b),f<g&&(g=f),d>h&&(h=d));b&&this.mask&&(b=this.mask._startX?this.mask._startX():this.mask.startX(),a=this.mask.getWidth(),g<b&&(g=b),h>b+a&&(h=b+a));this.ll_left=this.x+g;this.ll_right=this.x+h;return(h-g)*this.scaleX},getHeight:function(b){var a,c,d,f,g=this.graphics.startY(),h=g+this.graphics.getHeight();a=0;for(c=this.childList.length;a<c;a++)d=this.childList[a],typeof d.visible!=UNDEFINED&&
d.visible&&(f=d.y,"function"==typeof d._startY&&(f=d._startY()),d=f+d.getHeight(b),f<g&&(g=f),d>h&&(h=d));b&&this.mask&&(b=this.mask._startY?this.mask._startY():this.mask.startY(),a=this.mask.getHeight(),g<b&&(g=b),h>b+a&&(h=b+a));this.ll_top=this.y+g;this.ll_bottom=this.y+h;return(h-g)*this.scaleY},_startX:function(){this.getWidth();return this.ll_left},startX:function(){return this._startX()*this.scaleX},_startY:function(){this.getHeight();return this.ll_top},startY:function(){return this._startY()*
this.scaleY},_ll_loopframe:function(){this.dispatchEvent(LEvent.ENTER_FRAME)},clone:function(){var b=new a,c,d,k;b.copyProperty(this);b.graphics=this.graphics.clone();b.graphics.parent=b;d=b.childList.length=0;for(k=this.childList.length;d<k;d++)c=this.childList[d],c.clone&&(c=c.clone(),c.parent=b,b.childList.push(c));return b},_mevent:function(b){var a;for(a=0;a<this.mouseList.length;a++)if(this.mouseList[a].type==b)return!0;return!1},ll_dispatchMouseEvent:function(b,a,d,k,f){if(this.mouseEnabled)for(c=
0;c<this.mouseList.length;c++){var g=this.mouseList[c];g.type==b&&(a.selfX=(k-(this.x*d.scaleX+d.x))/(d.scaleX*this.scaleX),a.selfY=(f-(this.y*d.scaleY+d.y))/(d.scaleY*this.scaleY),a.currentTarget=a.clickTarget=this,a.target||(a.target=this),g.listener(a,this))}},ll_mouseout:function(b,a,c,d,f){if(a==LMouseEvent.MOUSE_MOVE&&this.ll_mousein&&(this.ll_mousein=!1,this._mevent(LMouseEvent.MOUSE_OUT)&&this.ll_dispatchMouseEvent(LMouseEvent.MOUSE_OUT,b,c,d,f),this.mouseChildren))for(var g=this.childList.length-
1;0<=g;g--)this.childList[g].mouseEvent&&this.childList[g].ll_mouseout&&this.childList[g].ll_mouseout(b,a,c,d,f)},mouseEvent:function(b,a,c){if(!b)return!1;var d,f,g=b.offsetX,h=b.offsetY,q;if(!this.visible)return!1;null==c&&(c={x:0,y:0,scaleX:1,scaleY:1});if(this.ismouseon(b,c)){LGlobal.os==OS_PC&&this.useCursor&&a==LMouseEvent.MOUSE_MOVE&&(LGlobal.cursor=this.useCursor);a!=LMouseEvent.MOUSE_MOVE||this.ll_mousein||(this.ll_mousein=!0,this._mevent(LMouseEvent.MOUSE_OVER)&&this.ll_dispatchMouseEvent(LMouseEvent.MOUSE_OVER,
b,c,g,h));if(this.mouseChildren){q={x:this.x*c.scaleX+c.x,y:this.y*c.scaleY+c.y,scaleX:c.scaleX*this.scaleX,scaleY:c.scaleY*this.scaleY};for(f=this.childList.length-1;0<=f&&(!this.childList[f].mouseEvent||!(d=this.childList[f].mouseEvent(b,a,q))||(b.target=this.childList[f],a==LMouseEvent.MOUSE_MOVE));f--);this._mevent(a)&&this.ll_dispatchMouseEvent(a,b,c,g,h)}return!0}this.ll_mouseout(b,a,c,g,h);return!1},hitTestPoint:function(b,a){var c=this.shapes;c&&0!=c.length||(this.getWidth(),this.getHeight(),
c=[{type:LShape.RECT,arg:[this.ll_left-this.x,this.ll_top-this.y,this.ll_right-this.ll_left,this.ll_bottom-this.ll_top]}]);return this.ismouseonShapes(c,b,a)},hitTestObject:function(b){var a=this.shapes,c=b.shapes,d,f,g,h,q,t,r,x;a&&0!=a.length||(this.getWidth(),this.getHeight(),a=[{type:LShape.RECT,arg:[this.ll_left-this.x,this.ll_top-this.y,this.ll_right-this.ll_left,this.ll_bottom-this.ll_top]}]);c&&0!=c.length||(b.getWidth(),b.getHeight(),c=[{type:LShape.RECT,arg:[b.ll_left-b.x,b.ll_top-b.y,b.ll_right-
b.ll_left,b.ll_bottom-b.ll_top]}]);d=this.getRootMatrix();f=b.getRootMatrix();for(g=a.length-1;0<=g;g--)for(h=a[g],x=this._changeShape(h.type,h.arg,d),q=c.length-1;0<=q;q--)if(t=c[q],r=b._changeShape(t.type,t.arg,f),h.type==LShape.VERTICES||h.type==LShape.RECT)if(t.type==LShape.VERTICES||t.type==LShape.RECT){if(LGlobal.hitTestPolygon(x,r))return!0}else{if(t.type==LShape.ARC&&LGlobal.hitTestPolygonArc(x,r))return!0}else if(t.type==LShape.VERTICES||t.type==LShape.RECT){if(LGlobal.hitTestPolygonArc(r,
x))return!0}else if(t.type==LShape.ARC&&Math.sqrt((x[0]-r[0])*(x[0]-r[0])+(x[1]-r[1])*(x[1]-r[1]))<x[2]+r[2])return!0;return!1},addShape:function(b,a){if(!(b==LShape.VERTICES&&3>a.length))return this.shapes.push({type:b,arg:a}),this.shapes},addShapes:function(b){this.shapes=0==this.shapes.length?b:this.shapes.concat(b)},clearShape:function(){this.shapes=[]},_ll_debugShape:function(b){var a,c,d,f,g;if(LGlobal.traceDebug&&this.shapes&&0!=this.shapes.length)for(a=0,c=this.shapes.length;a<c;a++){d=this.shapes[a];
b=b||LGlobal.canvas;f=d.arg;b.beginPath();if(d.type==LShape.RECT)b.rect(f[0],f[1],f[2],f[3]);else if(d.type==LShape.ARC)b.arc(f[0],f[1],f[2],0,2*Math.PI);else if(d.type==LShape.VERTICES){b.moveTo(f[0][0],f[0][1]);d=1;for(g=f.length;d<g;d++)b.lineTo(f[d][0],f[d][1]);b.lineTo(f[0][0],f[0][1])}b.closePath();b.strokeStyle="#00FF00";b.stroke()}},ismouseon:function(b,a){if(!this.visible||null==b||this.mask&&(this.mask.parent||(this.mask.parent=this.parent),!this.mask.ismouseon(b,a)))return!1;if(this.shapes&&
0<this.shapes.length)return this.ismouseonShapes(this.shapes,b.offsetX,b.offsetY);var c,d=!1,f=this.childList,g={x:this.x*a.scaleX+a.x,y:this.y*a.scaleY+a.y,scaleX:a.scaleX*this.scaleX,scaleY:a.scaleY*this.scaleY};for(c=f.length-1;0<=c;c--)if(f[c].ismouseon&&(d=f[c].ismouseon(b,g)),d){b.target=this.childList[c];break}d||(d=this.graphics.ismouseon(b,g));return d},die:function(){var b,a,c;this.graphics.clear();this.removeAllEventListener();this.stopDrag();this.box2dBody&&this.clearBody();b=0;a=this.childList;
for(c=a.length;b<c;b++)a[b].die&&a[b].die()}},c;for(c in d)a.prototype[c]=d[c];return a}(),LButton=function(){function a(b,c,d,k){LExtends(this,LSprite,[]);this.type="LButton";this.addChild(b);c?this.addChild(c):c=b;d?this.addChild(d):d=c;k?this.addChild(k):k=b;this.upState=this.bitmap_up=b;this.overState=this.bitmap_over=c;this.downState=d;this.disableState=k;this._ll_down_sx=this.downState.scaleX;this._ll_down_sy=this.downState.scaleY;this.overState.visible=!1;this.downState.visible=!1;this.buttonMode=
this.upState.visible=!0;this.staticMode=!1;this.setState(a.STATE_ENABLE);LMouseEventContainer.container[LMouseEvent.MOUSE_MOVE]&&LMouseEventContainer.pushButton(this);this.addEventListener(LMouseEvent.MOUSE_DOWN,this.ll_modeDown);this.setCursorEnabled(!0)}a.STATE_DISABLE="disable";a.STATE_ENABLE="enable";var d={setState:function(b){if(b==a.STATE_DISABLE)this.upState.visible=!1,this.overState.visible=!1,this.downState.visible=!1,this.disableState.visible=!0,this.mouseEnabled=!1;else if(b==a.STATE_ENABLE)this.overState.visible=
!1,this.downState.visible=!1,this.disableState.visible=!1,this.mouseEnabled=this.upState.visible=!0;else return;this.state=b},ll_mouseout:function(b,a,c,d,f){this.ll_mousein&&(b.clickTarget=this,this.ll_modeOut(b),this.ll_mousein=!1)},mouseEvent:function(b,a,c){if(!b)return!1;a==LMouseEvent.MOUSE_MOVE&&this.ll_button_mode&&this.ll_button_mode(b);return this.callParent("mouseEvent",arguments)},ll_button_mode:function(b){this.visible&&(b.clickTarget=this,this.hitTestPoint(b.offsetX,b.offsetY)?this.ll_modeOver(b):
this.ll_modeOut(b))},ll_modeDown:function(b){b=b.clickTarget;var c,d,k,f,g;b.buttonMode&&!b.tween&&(b.state==a.STATE_DISABLE?(b.upState.visible=!1,b.overState.visible=!1,b.downState.visible=!1,b.disableState.visible=!0):(b.upState.visible=!1,b.overState.visible=!1,b.downState.visible=!0,b._tweenOver=b.ll_modeOver,g=function(b){b=b.parent;delete b.tween;b._tweenOver({clickTarget:b});delete b._tweenOver},b.staticMode?b.tween=LTweenLiteTimeline.to(b.downState,.3,{}).to(b.downState,.1,{onComplete:g}):
(c=b.downState.getWidth(),d=b.downState.getHeight(),k=b.downState.x,f=b.downState.y,c=k+.5*(c-1.1*c),d=f+.5*(d-1.1*d),b.tween=LTweenLiteTimeline.to(b.downState,.3,{x:c,y:d,scaleX:1.1*b._ll_down_sx,scaleY:1.1*b._ll_down_sy,ease:Quart.easeOut}).to(b.downState,.1,{x:k,y:f,scaleX:b._ll_down_sx,scaleY:b._ll_down_sy,ease:Quart.easeOut,onComplete:g}))))},ll_modeOver:function(b){b=b.clickTarget;b.buttonMode&&(b.tween?b._tweenOver=b.ll_modeOver:b.state==a.STATE_DISABLE?(b.upState.visible=!1,b.overState.visible=
!1,b.downState.visible=!1,b.disableState.visible=!0):(b.upState.visible=!1,b.downState.visible=!1,b.overState.visible=!0))},ll_modeOut:function(b){b=b.clickTarget;b.buttonMode&&(b.tween?b._tweenOver=b.ll_modeOut:b.state==a.STATE_DISABLE?(b.upState.visible=!1,b.overState.visible=!1,b.downState.visible=!1,b.disableState.visible=!0):(b.overState.visible=!1,b.downState.visible=!1,b.upState.visible=!0))},setCursorEnabled:function(b){this.useCursor=b?"pointer":null},clone:function(){return new a(this.upState.clone(),
this.overState.clone(),this.downState.clone(),this.disableState.clone())},die:function(){LMouseEventContainer.container[LMouseEvent.MOUSE_MOVE]&&LMouseEventContainer.removeButton(this);this.callParent("die",arguments)}},c;for(c in d)a.prototype[c]=d[c];return a}();function LBlendMode(){throw"LBlendMode cannot be instantiated";}LBlendMode.SOURCE_OVER="source-over";LBlendMode.SOURCE_ATOP="source-atop";LBlendMode.SOURCE_IN="source-in";LBlendMode.SOURCE_OUT="source-out";LBlendMode.DESTINATION_OVER="destination-over";
LBlendMode.DESTINATION_ATOP="destination-atop";LBlendMode.DESTINATION_IN="destination-in";LBlendMode.DESTINATION_OUT="destination-out";LBlendMode.LIGHTER="lighter";LBlendMode.COPY="copy";LBlendMode.XOR="xor";LBlendMode.NONE=null;LBlendMode.NORMAL=null;var LTextFieldType=function(){throw"LTextFieldType cannot be instantiated";};LTextFieldType.INPUT="input";LTextFieldType.DYNAMIC=null;
LStyleSheet=function(){function a(){LExtends(this,LObject,[]);this.styleIndex=0;this.styleNames={}}a.prototype.clone=function(){var a=new this.constructor;a.copyProperty(this);return a};a.prototype.setStyle=function(a,c){this.styleIndex++;if(null===c)this.styleNames[a]&&delete this.styleNames[a];else{var b=c.replace(/(^\{)|(\}$)/g,"").split(";"),e,n;c={};for(e=0;e<b.length;e++)b[e]&&(n=b[e].split(":"),n[0]&&(c[n[0]]=n[1]));this.styleNames[a]=c}};a.prototype.getStyle=function(a){return this.styleNames[a]};
return a}();
LTextFormat=function(){function a(a,c,b,e,n,k){LExtends(this,LObject,[]);this.font=a?a:"Arial";this.size=c?c:15;this.color=b?b:"#000000";this.bold=e?e:!1;this.italic=n?n:!1;this.underline=k?k:!1}a.prototype.clone=function(){var a=new this.constructor;a.copyProperty(this);return a};a.prototype.getFontText=function(){return(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.size+"px "+this.font};a.prototype.setCss=function(a){for(var c in a)switch(c){case "color":this.color=a[c];break;case "font-family":this.font=
a[c];break;case "font-size":this.size=a[c];break;case "font-style":this.italic="italic"==a[c];break;case "font-weight":this.bold="bold"==a[c];break;case "text-decoration":this.color="underline"==a[c]}};return a}();
var LTextField=function(){function a(){LExtends(this,LInteractiveObject,[]);this.type="LTextField";this.texttype=null;this.styleSheet=this.htmlText=this.text="";this.font="Arial";this.size=15;this.color="#000000";this.weight="normal";this.textAlign="left";this.textBaseline="top";this.heightMode=a.HEIGHT_MODE_BOTTOM;this.stroke=!1;this.lineWidth=1;this.lineColor="#000000";this.width=150;this.height=this.size;this.multiline=this.wordWrap=this.displayAsPassword=!1;this.numLines=1;this.speed=0;this._speedIndex=
100}a.HEIGHT_MODE_BOTTOM="bottom";a.HEIGHT_MODE_BASELINE="baseline";var d={_showReady:function(b){b.font=this.weight+" "+this.size+"px "+this.font;b.textAlign=this.textAlign;b.textBaseline=this.textBaseline},ll_getStyleSheet:function(b,a,c,d){b=b.clone();if("font"==a)for(var f=0;c&&!(4<f++);){a=/(([^\s]*?)(\s*)=(\s*)("|')(.*?)\5)*/g;a=a.exec(c);if(!a||!a[0])break;switch(a[2]){case "face":b.font=a[6];break;case "color":b.color=a[6];break;case "size":b.size=a[6]}c=c.replace(a[0],"").replace(/(^\s*)|(\s*$)|(\n)/g,
"")}else if("b"==a)b.bold=!0;else if("u"==a)b.underline=!0;else if("i"==a)b.italic=!0;else if("p"==a&&this.wordWrap)d="\n"+d+"\n";else if(this.styleSheet){if("span"==a){if(a=/(([^\s]*?)(\s*)=(\s*)("|')(.*?)\5)*/g,(a=a.exec(c))&&a[0])switch(a[2]){case "class":f=this.styleSheet.getStyle("."+a[6])}}else this.styleSheet.getStyle(a)&&(f=this.styleSheet.getStyle(a));f&&b.setCss(f)}this.ll_getHtmlText(b,d)},ll_getHtmlText:function(b,a){if(a){var c,d,f,g=/<(.*?)(\s*)(.*?)>(.*?)<\/\1>/g.exec(a);if(g&&g[0]){0<
g.index&&this.ll_htmlTexts.push({textFormat:b.clone(),text:a.substring(0,g.index)});c=g[1];f=d=g.index;do f=a.indexOf("</"+c,f+1),d=a.indexOf("<"+c,d+1);while(0<d&&d<f);d=a.substring(a.indexOf(">",g.index)+1,f);this.ll_getStyleSheet(b,c,g[3],d);this.ll_getHtmlText(b,a.substring(f+c.length+3))}else this.ll_htmlTexts.push({textFormat:b.clone(),text:a})}},_ll_show:function(b){var c=this,d,k,f,g,h,q,t,r,x;if(c.texttype==LTextFieldType.INPUT){c.inputBackLayer.ll_show();d=c.getRootCoordinate();LGlobal.inputBox.name==
"input"+c.objectIndex&&(LGlobal.inputBox.style.marginTop=parseInt(LGlobal.canvasObj.style.marginTop)+((d.y+c.inputBackLayer.startY())*parseInt(LGlobal.canvasObj.style.height)/LGlobal.canvasObj.height>>>0)+"px",LGlobal.inputBox.style.marginLeft=parseInt(LGlobal.canvasObj.style.marginLeft)+((d.x+c.inputBackLayer.startX())*parseInt(LGlobal.canvasObj.style.width)/LGlobal.canvasObj.width>>>0)+"px");if(LGlobal.inputTextField&&LGlobal.inputTextField.objectIndex==c.objectIndex)return;b.clip()}LGlobal.fpsStatus&&
LGlobal.fpsStatus.text++;b.fillStyle=c.color;c.stroke&&(b.strokeStyle=c.lineColor,b.lineWidth=c.lineWidth+1);if(c.htmlText){if(c.ll_htmlText!=c.htmlText||c.styleSheet&&(c.ll_style_objectIndex!=c.styleSheet.objectIndex||c.ll_styleIndex==c.styleSheet.styleIndex))d=new LTextFormat,c.ll_htmlTexts=[],c.ll_htmlText=c.htmlText,c.styleSheet&&(c.ll_style_objectIndex=c.styleSheet.objectIndex,c.ll_styleIndex=c.styleSheet.styleIndex),c.ll_getHtmlText(d,c.htmlText);q=h=f=0;c._ll_height=c.wordHeight||30;a.underlineY||
(a.underlineY={alphabetic:0,top:1,bottom:-.2,middle:.4,hanging:.8});c.ll_htmlTexts.forEach(function(d){var n=d.textFormat;d=d.text;b.font=n.getFontText();b.fillStyle=n.color;k=0;for(g=d.length;k<g;k++)(r=/(?:\r\n|\r|\n|¥n)/.exec(d.substr(k,1)))?(f=0,h=k+1,q++):(t=1.2*b.measureText("O").width,c.stroke&&b.strokeText(d.substr(k,1),f,q*c._ll_height),b.fillText(d.substr(k,1),f,q*c._ll_height),n.underline&&(b.beginPath(),x=q*c._ll_height+t*a.underlineY[c.textBaseline],b.moveTo(f,x),b.lineTo(f+b.measureText(d.substr(k,
1)).width,x),b.stroke())),f+=b.measureText(d.substr(k,1)).width,c.wordWrap&&f+b.measureText(d.substr(k+1,1)).width>c.width&&(f=0,h=k+1,q++);c.height=(q+1)*c._ll_height})}else{d=c.text;if(c.displayAsPassword)for(d="",k=0,g=c.text.length;k<g;k++)d+="*";if(c.wordWrap||c.multiline){k=q=h=f=0;for(g=c.text.length;k<g;k++)(r=/(?:\r\n|\r|\n|¥n)/.exec(d.substr(k,1)))?(f=0,h=k+1,q++):(c.stroke&&b.strokeText(d.substr(k,1),f,q*c.wordHeight),b.fillText(d.substr(k,1),f,q*c.wordHeight)),c.numLines=q,f=b.measureText(c.text.substr(h,
k+1-h)).width,c.wordWrap&&f+b.measureText(d.substr(k,1)).width>c.width&&(f=0,h=k+1,q++);c.height=(q+1)*c.wordHeight}else c.numLines=1,c.stroke&&b.strokeText(d,0,0,b.measureText(d).width),b.fillText(d,0,0,b.measureText(d).width);c.windRunning&&c._ll_windRun()}},_wordHeight:function(b){0<b?this.wordHeight=b:(this.wordWrap=!1,this.wordHeight=this.getHeight());this.height=0},setMultiline:function(b,a){b&&this._wordHeight(a);this.multiline=b},setWordWrap:function(b,a){b&&this._wordHeight(a);this.wordWrap=
b},setType:function(b,a){this.texttype!=b&&b==LTextFieldType.INPUT?(null==a||"LSprite"!=a.type?(this.inputBackLayer=new LSprite,this.inputBackLayer.graphics.drawRect(1,"#000000",[0,.4*-this.getHeight(),this.width,1.5*this.getHeight()])):this.inputBackLayer=a,this.inputBackLayer.parent=this,LMouseEventContainer.container[LMouseEvent.MOUSE_DOWN]&&LMouseEventContainer.pushInputBox(this)):(this.inputBackLayer=null,LMouseEventContainer.removeInputBox(this));this.texttype=b},ismouseon:function(b,a){if(!b||
!this.visible)return!1;a||(a={x:0,y:0,scaleX:1,scaleY:1});return this.mask&&(this.mask.parent||(this.mask.parent=this.parent),!this.mask.ismouseon(b,a))?!1:this.inputBackLayer?this.inputBackLayer.ismouseon(b,{x:this.x*a.scaleX+a.x,y:this.y*a.scaleY+a.y,scaleX:a.scaleX*this.scaleX,scaleY:a.scaleY*this.scaleY}):this.ismouseonShapes([{type:LShape.RECT,arg:[0,0,this._getWidth(),this._getHeight()]}],b.offsetX,b.offsetY)},clone:function(){var b=new this.constructor;b.copyProperty(this);b.texttype=null;
this.texttype==LTextFieldType.INPUT&&b.setType(LTextFieldType.INPUT);return b},mouseEvent:function(b,a,c){null!=this.inputBackLayer&&a==LMouseEvent.MOUSE_DOWN&&(b=this.ismouseon(b,c))&&this.focus()},_ll_getValue:function(){LGlobal.inputBox.style.display!=NONE&&(LGlobal.inputTextField.text=LGlobal.inputTextBox.value,LEvent.removeEventListener(LGlobal.inputTextBox,LKeyboardEvent.KEY_DOWN,LGlobal.inputTextField._ll_input),LGlobal.inputBox.style.display=NONE,LGlobal.inputTextField.dispatchEvent(LFocusEvent.FOCUS_OUT),
LGlobal.inputTextField=null)},updateInput:function(){this.texttype==LTextFieldType.INPUT&&LGlobal.inputTextField.objectIndex==this.objectIndex&&(LGlobal.inputTextBox.value=LGlobal.inputTextField.text)},_ll_input:function(b){var a=new LEvent(LTextEvent.TEXT_INPUT);a.keyCode=b.keyCode;LGlobal.inputTextField.text=LGlobal.inputTextBox.value;LGlobal.inputTextField.hasEventListener(LTextEvent.TEXT_INPUT)?b.returnValue=LGlobal.inputTextField.dispatchEvent(a):b.returnValue=!0},focus:function(){var b,a;this.parent&&
this.texttype==LTextFieldType.INPUT&&(LGlobal.inputTextField&&LGlobal.inputTextField.objectIndex!=this.objectIndex&&this._ll_getValue(),this.dispatchEvent(LFocusEvent.FOCUS_IN),b=this.getAbsoluteScale(),LGlobal.inputBox.style.display="",LGlobal.inputBox.name="input"+this.objectIndex,LGlobal.inputTextField=this,LGlobal.inputTextareaBoxObj.style.display=NONE,LGlobal.inputTextBoxObj.style.display=NONE,LGlobal.passwordBoxObj.style.display=NONE,LGlobal.inputTextBox=this.displayAsPassword?LGlobal.passwordBoxObj:
this.multiline?LGlobal.inputTextareaBoxObj:LGlobal.inputTextBoxObj,a=parseInt(LGlobal.canvasObj.style.width)/LGlobal.canvasObj.width,sy=parseInt(LGlobal.canvasObj.style.height)/LGlobal.canvasObj.height,LGlobal.inputTextBox.style.display="",LGlobal.inputTextBox.value=this.text,LGlobal.inputTextBox.style.height=this.inputBackLayer.getHeight()*b.scaleY*this.scaleY*sy+"px",LGlobal.inputTextBox.style.width=this.inputBackLayer.getWidth()*b.scaleX*this.scaleX*a+"px",LGlobal.inputTextBox.style.color=this.color,
LGlobal.inputTextBox.style.fontSize=(this.size*parseFloat(LGlobal.canvasObj.style.height)/LGlobal.canvasObj.height>>0)+"px",LGlobal.inputTextBox.style.fontFamily=this.font,LEvent.addEventListener(LGlobal.inputTextBox,LKeyboardEvent.KEY_DOWN,LGlobal.inputTextField._ll_input),this.texttype==LTextFieldType.INPUT&&(rc=this.getRootCoordinate(),LGlobal.inputBox.name=="input"+this.objectIndex&&(LGlobal.inputBox.style.marginTop=parseInt(LGlobal.canvasObj.style.marginTop)+((rc.y+this.inputBackLayer.startY())*
parseInt(LGlobal.canvasObj.style.height)/LGlobal.canvasObj.height>>>0)+"px",LGlobal.inputBox.style.marginLeft=parseInt(LGlobal.canvasObj.style.marginLeft)+((rc.x+this.inputBackLayer.startX())*parseInt(LGlobal.canvasObj.style.width)/LGlobal.canvasObj.width>>>0)+"px")),setTimeout(function(){LGlobal.inputTextBox.focus()},0))},_getWidth:function(){if(this.wordWrap)return this.width;LGlobal.canvas.font=this.size+"px "+this.font;return LGlobal.canvas.measureText(this.text).width},getWidth:function(b){var a,
c;a=this._getWidth()*this.scaleX;if(b&&this.mask){b=this.mask._startX?this.mask._startX():this.mask.startX();if(b>a)return 0;c=this.mask.getWidth();return b+c>a?a-b:c}return a},_getHeight:function(){var b=LGlobal.canvas,c,d,k,f,g;if(this.wordWrap){b.font=this.weight+" "+this.size+"px "+this.font;if(0==this.height){c=g=f=0;for(d=this.text.length;c<d;c++){if(k=/(?:\r\n|\r|\n|¥n)/.exec(this.text.substr(c,1)))f=c+1,g++;k=b.measureText(this.text.substr(f,c+1-f)).width;this.wordWrap&&k+b.measureText(this.text.substr(c+
1,1)).width>this.width&&(f=c+1,g++)}this.height=(g+1)*this.wordHeight}return this.height}b.font=this.weight+" "+this.size+"px "+this.font;d=1.2*b.measureText("O").width;this.heightMode==a.HEIGHT_MODE_BASELINE&&(d*=1.2);return d},getHeight:function(b){var a,c;a=this._getHeight()*this.scaleY;if(b&&this.mask){b=this.mask._startY?this.mask._startY():this.mask.startY();if(b>a)return 0;c=this.mask.getHeight();return b+c>a?a-b:c}return a},wind:function(b){this.wind_over_function=b;this.windRunning=!0;this._ll_wind_text=
this.text;this.text="";this._ll_wind_length=0},_ll_windRun:function(){this._speedIndex++<this.speed||(this._speedIndex=0,this._ll_wind_length>this._ll_wind_text.length?(this.windRunning=!1,this.wind_over_function&&this.wind_over_function(),this.dispatchEvent(new LEvent(LTextEvent.WIND_COMPLETE))):(this.text=this._ll_wind_text.substring(0,this._ll_wind_length),this._ll_wind_length++))},die:function(){LMouseEventContainer.removeInputBox(this)}},c;for(c in d)a.prototype[c]=d[c];return a}(),LBitmap=function(){function a(b){LExtends(this,
LDisplayObject,[]);this.type="LBitmap";this.rotateCenter=!0;if(this.bitmapData=b)this.width=this.bitmapData.width,this.height=this.bitmapData.height}var d={_canShow:function(){return this.visible&&this.bitmapData},_rotateReady:function(){0!=this.rotate&&this.rotateCenter?(this.rotatex=.5*this.getWidth(),this.rotatey=.5*this.getHeight()):this.rotatex=this.rotatey=0},_coordinate:function(b){},_ll_show:function(b){this.ll_draw(b)},ll_draw:function(b){LGlobal.fpsStatus&&LGlobal.fpsStatus.bitmapData++;
b.drawImage(this.bitmapData.image,this.bitmapData.x,this.bitmapData.y,this.bitmapData.width,this.bitmapData.height,this.x,this.y,this.bitmapData.width,this.bitmapData.height)},clone:function(){var b=new a(this.bitmapData.clone());b.copyProperty(this);b.rotateCenter=this.rotateCenter;return b},ismouseon:function(b,a){return b&&this.visible&&this.bitmapData&&(!this.mask||(this.mask.parent||(this.mask.parent=this.parent),this.mask.ismouseon(b,a)))?this.ismouseonShapes([{type:LShape.RECT,arg:[0,0,this.bitmapData.width,
this.bitmapData.height]}],b.offsetX,b.offsetY):!1},getWidth:function(b){var a,c;a=null!=this.bitmapData?this.bitmapData.width*(0<this.scaleX?this.scaleX:-this.scaleX):0;if(b&&this.mask){b=this.mask._startX?this.mask._startX():this.mask.startX();if(b>a)return 0;c=this.mask.getWidth();return b+c>a?a-b:c}return a},getHeight:function(b){var a,c;a=null!=this.bitmapData?this.bitmapData.height*(0<this.scaleY?this.scaleY:-this.scaleY):0;if(b&&this.mask){b=this.mask._startY?this.mask._startY():this.mask.startY();
if(b>a)return 0;c=this.mask.getHeight();return b+c>a?a-b:c}return a},startX:function(){return this.x},startY:function(){return this.y},die:function(){}},c;for(c in d)a.prototype[c]=d[c];return a}(),LBitmapData=function(){function a(b,c,d,k,f,g){LExtends(this,LObject,[]);this.type="LBitmapData";typeof g==UNDEFINED&&(g=a.DATA_IMAGE);this.oncomplete=null;this._setPixel=this._locked=!1;this.x=null==c?0:c;this.y=null==d?0:d;this.height=this.width=0;this.dataType=null;if(b&&"object"==typeof b)this.image=
b,this.dataType=a.DATA_IMAGE,this.width=null==k?this.image.width:k,this.height=null==f?this.image.height:f,this._setDataType(g);else{this._createCanvas();this.dataType=a.DATA_CANVAS;this._canvas.width=this.width=k?k:1;this._canvas.height=this.height=f?f:1;if("string"==typeof b)this._context.fillStyle=b,this._context.fillRect(0,0,this.width,this.height);else if("number"==typeof b){c=this._context.createImageData(this.width,this.height);for(d=0;d<c.data.length;d+=4)c.data[d+0]=b>>16&255,c.data[d+1]=
b>>8&255,c.data[d+2]=b&255,c.data[d+3]=255;this._context.putImageData(c,0,0)}this.image=this._canvas;g==a.DATA_IMAGE&&this._setDataType(g)}this.resize()}a.DATA_IMAGE="data_image";a.DATA_CANVAS="data_canvas";var d={_setDataType:function(b){this.dataType!=b&&(b==a.DATA_CANVAS?(this._createCanvas(),this._canvas.width=this.image.width,this._canvas.height=this.image.height,this._context.clearRect(0,0,this._canvas.width,this._canvas.height),this._context.drawImage(this.image,0,0),this.image=this._canvas):
b==a.DATA_IMAGE&&(this.image=new Image,this.image.width=this._canvas.width,this.image.height=this._canvas.height,this.image.src=this._canvas.toDataURL()),this.dataType=b)},_createCanvas:function(){this._canvas||(this._canvas=document.createElement("canvas"),this._context=this._canvas.getContext("2d"))},clear:function(b){this._createCanvas();b?this._context.clearRect(b.x,b.y,b.width,b.height):this._canvas.width=this.image.width;this.dataType==a.DATA_IMAGE&&(this.image.src=this._canvas.toDataURL())},
setProperties:function(b,a,c,d){this.x=b;this.y=a;this.width=c;this.height=d;this.resize()},setCoordinate:function(b,a){this.x=b;this.y=a;this.resize()},clone:function(){return new a(this.image,this.x,this.y,this.width,this.height,this.dataType)},_ready:function(){this._dataType=this.dataType;this._setDataType(a.DATA_CANVAS);this._data=this._context.getImageData(this.x,this.y,this.width,this.height)},_update:function(){this._context.putImageData(this._data,this.x,this.y,0,0,this.width,this.height);
this._setDataType(this._dataType);this._data=null},applyFilter:function(b,a,c,d,f){b=this._context.getImageData(this.x+a.x,this.y+a.y,a.width,a.height);d=d.filter(b,a.width,f);this.putPixels(new LRectangle(c.x,c.y,a.width,a.height),d)},getPixel:function(b,a,c){b>>=0;a>>=0;this._locked||this._ready();b=4*this.width*a+4*b;a=this._data.data;this._locked||this._update();return"number"==c?a[b]<<16|a[b+1]<<8|a[b+2]:[a[b],a[b+1],a[b+2],a[b+3]]},setPixel:function(b,a,c){b>>=0;a>>=0;this._locked||this._ready();
var d=this._data;b=4*this.width*a+4*b;"object"==typeof c?(d.data[b+0]=c[0],d.data[b+1]=c[1],d.data[b+2]=c[2],d.data[b+3]=c[3]):("string"==typeof c&&(c=parseInt(c.replace("#","0x"))),d.data[b+0]=c>>16&255,d.data[b+1]=c>>8&255,d.data[b+2]=c&255,d.data[b+3]=255);this._locked||this._update()},getPixels:function(b){this._locked||this._ready();b=this._context.getImageData(this.x+b.x,this.y+b.y,b.width,b.height);this._locked||this._update();return b},setPixels:function(b,a){var c,d,f,g,h,q;this._locked||
this._ready();f=this._data;if("object"==typeof a)for(g=this._canvas.width,h=b.x;h<b.right;h++)for(q=b.y;q<b.bottom;q++)c=4*g*(this.y+q)+4*(this.x+h),d=4*a.width*(q-b.y)+4*(h-b.x),f.data[c+0]=a.data[d+0],f.data[c+1]=a.data[d+1],f.data[c+2]=a.data[d+2],f.data[c+3]=a.data[d+3];else for("string"==typeof a&&(a=parseInt(a.replace("#","0x"))),a=[a>>16&255,a>>8&255,a&255],g=this._canvas.width,h=b.x;h<b.right;h++)for(q=b.y;q<b.bottom;q++)c=4*g*(this.y+q)+4*(this.x+h),f.data[c+0]=a[0],f.data[c+1]=a[1],f.data[c+
2]=a[2],f.data[c+3]=255;this._locked||this._update()},putPixels:function(b,c){this.dataType==a.DATA_CANVAS&&"object"==typeof c&&this._context.putImageData(c,this.x+b.x,this.y+b.y,0,0,b.width,b.height)},lock:function(){this._locked=!0;this._ready()},unlock:function(){this._locked=!1;this._update()},draw:function(b,c,d,k,f){var g,h,q=!1,t=this.dataType;this._setDataType(a.DATA_CANVAS);if(c||d||k||f)this._context.save(),q=!0;f&&(b instanceof a?(g=b.x,h=b.y):g=h=0,b=new a(b.getDataCanvas(),g+f.x,h+f.y,
f.width,f.height,a.DATA_CANVAS));g=b.getWidth()>>>0;h=b.getHeight()>>>0;0==g||0==h?this._setDataType(t):(f=b.getDataCanvas(),d&&(b.colorTransform(new LRectangle(0,0,g,h),d),f=b.image),c&&this._context.setTransform(c.a,c.b,c.c,c.d,c.tx,c.ty),k&&(this._context.globalCompositeOperation=k),this._context.drawImage(f,b.x,b.y,g,h,0,0,g,h),q&&this._context.restore(),this._setDataType(t),this.resize())},getDataCanvas:function(){var b=this.dataType;this._setDataType(a.DATA_CANVAS);this._setDataType(b);return this._canvas},
getWidth:function(){return this.width},getHeight:function(){return this.height},resize:function(){var a=this.image.width-this.x,c=this.image.height-this.y;this.width=this.width<a?this.width:a;this.height=this.height<c?this.height:c},colorTransform:function(b,c){if(this.dataType==a.DATA_CANVAS){for(var d=this._context.getImageData(this.x+b.x,this.y+b.y,b.width,b.height),k=d.data,f=0,g=k.length;f<g;f+=4){var h=f,q=f+1,t=f+2,r=f+3;k[h]=k[h]*c.redMultiplier+c.redOffset;k[q]=k[q]*c.greenMultiplier+c.greenOffset;
k[t]=k[t]*c.blueMultiplier+c.blueOffset;k[r]=k[r]*c.alphaMultiplier+c.alphaOffset}this._context.putImageData(d,this.x+b.x,this.y+b.y,0,0,b.width,b.height)}},copyPixels:function(b,c,d){var k,f,g,h;this.dataType==a.DATA_CANVAS&&(k=b.x,f=b.y,g=b.width,h=b.height,b.setProperties(c.x+b.x,c.y+b.y,c.width,c.height),this._context.drawImage(b.image,b.x,b.y,b.width,b.height,d.x,d.y,b.width,b.height),b.x=k,b.y=f,b.width=g,b.height=h)}},c;for(c in d)a.prototype[c]=d[c];return a}(),LBitmapFilter=function(){function a(){LExtends(this,
LObject,[]);this.type="LBitmapFilter"}a.prototype.ll_show=function(a,c){if(!this.cacheMaking){c=c||LGlobal.canvas;var b;"LBitmap"==a.constructor.name?b=a.bitmapData:(a._ll_cacheAsBitmap||(this.cacheMaking=!0,a.cacheAsBitmap(!0),this.cacheMaking=!1),b=a._ll_cacheAsBitmap.bitmapData);this.bitmapDataIndex!==b.objectIndex&&(this.bitmapDataIndex=b.objectIndex,b.applyFilter(b,new LRectangle(0,0,b.width,b.height),new LPoint(0,0),this,c))}};return a}(),LDropShadowFilter=function(){function a(a,c,d,k){LExtends(this,
LBitmapFilter,[]);this.type="LDropShadowFilter";this.distance=a?a:0;this.angle=c?c:0;this.shadowColor=d?d:"#000000";this.shadowBlur=k?k:20;this.setShadowOffset()}var d={setShadowOffset:function(){var a=this.angle*Math.PI/180;this.shadowOffsetX=this.distance*Math.cos(a);this.shadowOffsetY=this.distance*Math.sin(a)},ll_show:function(a,c){c=c||LGlobal.canvas;c.shadowColor=this.shadowColor;c.shadowBlur=this.shadowBlur;c.shadowOffsetX=this.shadowOffsetX;c.shadowOffsetY=this.shadowOffsetY},setDistance:function(a){this.distance=
a;this.setShadowOffset()},setAngle:function(a){this.angle=a;this.setShadowOffset()},setColor:function(a){this.shadowColor=a},setBlur:function(a){this.shadowBlur=a}},c;for(c in d)a.prototype[c]=d[c];return a}(),LColorMatrixFilter=function(){function a(a){LExtends(this,LBitmapFilter,[]);this.type="LColorMatrixFilter";this.matrix=a}var d={filter:function(a,c,d){d=d||LGlobal.canvas;c=a.data;a=d.createImageData(a);d=a.data;for(var k=d.length,f=this.matrix,g=0;g<k;g+=4)d[g]=f[0]*c[g]+f[1]*c[g+1]+f[2]*c[g+
2]+f[3]*c[g+3]+f[4],d[g+1]=f[5]*c[g]+f[6]*c[g+1]+f[7]*c[g+2]+f[8]*c[g+3]+f[9],d[g+2]=f[10]*c[g]+f[11]*c[g+1]+f[12]*c[g+2]+f[13]*c[g+3]+f[14],d[g+3]=f[15]*c[g]+f[16]*c[g+1]+f[17]*c[g+2]+f[18]*c[g+3]+f[19];return a}},c;for(c in d)a.prototype[c]=d[c];return a}(),LConvolutionFilter=function(){function a(a,c,d,k,f,g,h,q,t){LExtends(this,LBitmapFilter,[]);this.type="LConvolutionFilter";this.matrixX=a?a:0;this.matrixY=c?c:0;this.matrix=d;k||(k=d.reduce(function(a,b){return a+b})||1);this.divisor=k;this.bias=
f?f:0}var d={filter:function(a,c,d){d=d||LGlobal.canvas;var k=a.data;a=d.createImageData(a);d=a.data;for(var f=d.length,g=0;g<f;g++)if(0===(g+1)%4)d[g]=k[g];else{res=0;for(var h=[k[g-4*c-4]||k[g],k[g-4*c]||k[g],k[g-4*c+4]||k[g],k[g-4]||k[g],k[g],k[g+4]||k[g],k[g+4*c-4]||k[g],k[g+4*c]||k[g],k[g+4*c+4]||k[g]],q=0;9>q;q++)res+=h[q]*this.matrix[q];res/=this.divisor;this.bias&&(res+=this.bias);d[g]=res}return a}},c;for(c in d)a.prototype[c]=d[c];return a}(),LAnimation=function(){function a(a,c,d){LExtends(this,
LSprite,[]);this.type="LAnimation";this._ll_stepIndex=this.colIndex=this.rowIndex=0;this._ll_stepArray=[];this.mode=1;this.isMirror=!1;Array.isArray(c)?this.bitmapList=c:this.bitmapList=[c];this.bitmap=new LBitmap(this.bitmapList[0]);this.imageArray=d;this.addChild(this.bitmap);null!=a&&a.addChild(this);this.onframe();this.colIndex=0}var d={setAction:function(a,c,d,k){var f=!1;null!=a&&0<=a&&a<this.imageArray.length&&(this.rowIndex=a,f=!0);null!=c&&0<=c&&c<this.imageArray[a].length&&(this.colIndex=
c,f=!0);null!=d&&(this.mode=d,f=!0);null!=k&&((this.isMirror=k)?(this.bitmap.x=this.bitmap.getWidth(),this.bitmap.scaleX=-1*Math.abs(this.bitmap.scaleX)):(this.bitmap.x=0,this.bitmap.scaleX=Math.abs(this.bitmap.scaleX)),f=!0);f&&(this._ll_stepIndex=0,this._send_complete=!1)},getAction:function(){return[this.rowIndex,this.colIndex,this.mode,this.isMirror]},onframe:function(){var a,c=0,d=null;this.colIndex>=this.imageArray[this.rowIndex].length&&(this.colIndex=0);a=this.imageArray[this.rowIndex][this.colIndex];
d=this._ll_stepArray[this.rowIndex]&&this._ll_stepArray[this.rowIndex][this.colIndex]?this._ll_stepArray[this.rowIndex][this.colIndex]:0;if(0==this._ll_stepIndex){"number"==typeof a.dataIndex&&Array.isArray(this.bitmapList)&&a.dataIndex<this.bitmapList.length&&(this.bitmap.bitmapData=this.bitmapList[a.dataIndex]);if(a.script)for(i=0;i<a.script.length;i++)obj=a.script[i],(l=this.ll_labelList[obj.name])&&l.rowIndex==this.rowIndex&&l.colIndex==this.colIndex&&l.mode==this.mode&&l.isMirror==(-1==this.bitmap.scaleX)&&
obj.func(this,obj.params);typeof a.width!=UNDEFINED&&typeof a.height!=UNDEFINED?this.bitmap.bitmapData.setProperties(a.x,a.y,a.width,a.height):this.bitmap.bitmapData.setCoordinate(a.x,a.y);typeof a.sx!=UNDEFINED&&(c=a.sx);typeof a.sy!=UNDEFINED&&(this.bitmap.y=a.sy);typeof a.mirror!=UNDEFINED&&(this.bitmap.rotateCenter=!1,this.bitmap.scaleX=a.mirror?-1:1);this.bitmap.x=c+(1==this.bitmap.scaleX?0:this.bitmap.getWidth())}!(this._ll_stepIndex++<d)&&(this._ll_stepIndex=0,this.colIndex+=this.mode,this.colIndex>=
this.imageArray[this.rowIndex].length||0>this.colIndex)&&(this.colIndex=0<this.mode?0:this.imageArray[this.rowIndex].length-1,"LAnimationTimeline"==this.constructor.name?this._send_complete=!0:this.dispatchEvent(LEvent.COMPLETE))},clone:function(){var a=new this.constructor(null,this.bitmapList,this.imageArray.slice(0));a.copyProperty(this);a.childList.length=0;a.bitmap=this.bitmap.clone();a.addChild(a.bitmap);return a}},c;for(c in d)a.prototype[c]=d[c];return a}(),LAnimationTimeline=function(){function a(a,
c){LExtends(this,LAnimation,[null,a,c]);this.type="LAnimationTimeline";this._speedIndex=this.speed=0;this.ll_labelList={};for(var d=0,k,f,g;d<c.length;d++)for(k=c[d],f=0;f<k.length;f++)g=k[f],g.label&&this.setLabel(g.label,d,f,1,g.isMirror?!0:!1);this.addEventListener(LEvent.ENTER_FRAME,this._ll_onframe)}var d={clone:function(){var a,c,d=new this.constructor(this.bitmapList,this.imageArray.slice(0));d.copyProperty(this);d.childList.length=0;d.bitmap=this.bitmap.clone();d.addChild(d.bitmap);for(a in this.ll_labelList)c=
this.ll_labelList[a],d.ll_labelList[a]={rowIndex:c.rowIndex,colIndex:c.colIndex,mode:c.mode,isMirror:c.isMirror};return d},setFrameSpeedAt:function(a,c,d){this._ll_stepArray[a]||(this._ll_stepArray[a]=[]);this._ll_stepArray[a][c]=d},_ll_onframe:function(a){a=a.target;if(!(a._ll_stop||a._speedIndex++<a.speed)){if(a._send_complete&&(a.dispatchEvent(LEvent.COMPLETE),a._send_complete=!1,a._ll_stop))return;a._speedIndex=0;a.onframe()}},setLabel:function(a,c,d,k,f){this.ll_labelList[a]={rowIndex:c,colIndex:d,
mode:typeof k==UNDEFINED?1:k,isMirror:typeof f==UNDEFINED?!1:f}},play:function(){this._ll_stop=!1},stop:function(){this._ll_stop=!0},gotoAndPlay:function(a){a=this.ll_labelList[a];this.setAction(a.rowIndex,a.colIndex,a.mode,a.isMirror);this.play();this.onframe()},gotoAndStop:function(a){a=this.ll_labelList[a];this.setAction(a.rowIndex,a.colIndex,a.mode,a.isMirror);this.stop();this.onframe()},addFrameScript:function(a,c,d){var k=this.ll_labelList[a],k=this.imageArray[k.rowIndex][k.colIndex];k.script||
(k.script=[]);k.script.push({func:c,params:d,name:a})},removeFrameScript:function(a){var c=this.ll_labelList[a],d,k;if(d=this.imageArray[c.rowIndex][c.colIndex].script)for(k=0;k<d.length;k++)if(c=d[k],c.name==a){d.splice(k,1);break}}},c;for(c in d)a.prototype[c]=d[c];return a}(),LLoadManage=function(){function a(){this.llname="ll.file.";this.llload="ll.load."}a.prototype={load:function(a,c,b){a&&0!=a.length?(this.list=a,this.onupdate=c,this.oncomplete=b,this.loader=this,this.loadIndex=this.index=
0,this.result=[],this.lresult=[],this.loadInit()):b([])},loadInit:function(){this.index>=this.list.length||(this.loadIndex=0,this.loadStart(),this.reloadtime=setTimeout(this.loadInit.bind(this),1E4))},loadStart:function(){var a,c;this.loadIndex>=this.list.length||(a=this.list[this.loadIndex],a.name||(a.name=this.llname+this.loadIndex),this.lresult[this.llload+a.name]||(a.type||(c=getExtension(a.path),"txt"==c?a.type=LURLLoader.TYPE_TEXT:"js"==c?a.type=LURLLoader.TYPE_JS:0<=["mp3","ogg","wav","m4a"].indexOf(c)&&
(a.type=LSound.TYPE_SOUND)),a.type==LURLLoader.TYPE_TEXT||a.type==LURLLoader.TYPE_JS?(this.loader=new LURLLoader,this.loader.name=a.name,this.loader.addEventListener(LEvent.COMPLETE,this.loadComplete.bind(this)),this.loader.load(this.url(a.path),a.type)):a.type==LSound.TYPE_SOUND?(this.loader=new LSound,this.loader.name=a.name,this.loader.addEventListener(LEvent.COMPLETE,this.loadComplete.bind(this)),this.loader.load(a.path)):a.type==LFontLoader.TYPE_FONT?(this.loader=new LFontLoader,this.loader.name=
a.name,this.loader.addEventListener(LEvent.COMPLETE,this.loadComplete.bind(this)),this.loader.load(a.path,a.name)):(this.loader=new LLoader,this.loader.name=a.name,this.loader.addEventListener(LEvent.COMPLETE,this.loadComplete.bind(this)),this.loader.load(this.url(a.path),LLoader.TYPE_BITMAPDATE))),this.loadIndex++,this.loadStart())},loadComplete:function(a){if(a&&a.currentTarget&&a.currentTarget.name){a.currentTarget.removeEventListener(LEvent.COMPLETE,this.loadComplete);0<=a.currentTarget.name.indexOf(this.llname)&&
(a.target=1);if(this.lresult[this.llload+a.currentTarget.name])return;this.result[a.currentTarget.name]=a.target;this.lresult[this.llload+a.currentTarget.name]=1}this.index++;if(this.onupdate)this.onupdate(Math.floor(100*this.index/this.list.length));this.index>=this.list.length&&(this.reloadtime&&clearTimeout(this.reloadtime),this.loader=null,a=this.result,LGlobal.forceRefresh=!0,this.oncomplete(a))},url:function(a){return LGlobal.traceDebug?a+(0<=a.indexOf("?")?"&":"?")+"t="+(new Date).getTime():
a}};a.load=function(d,c,b){(new a).load(d,c,b)};return a}(),LEasing={None:{easeIn:function(a,d,c,b){return d+a*c/b},easeOut:function(a,d,c,b){return d+a*c/b},easeInOut:function(a,d,c,b){return d+a*c/b}},Quad:{easeIn:function(a,d,c,b){return c*(a/=b)*a+d},easeOut:function(a,d,c,b){return-c*(a/=b)*(a-2)+d},easeInOut:function(a,d,c,b){return 1>(a/=b/2)?c/2*a*a+d:-c/2*(--a*(a-2)-1)+d}},Cubic:{easeIn:function(a,d,c,b){return c*(a/=b)*a*a+d},easeOut:function(a,d,c,b){return c*((a=a/b-1)*a*a+1)+d},easeInOut:function(a,
d,c,b){return 1>(a/=b/2)?c/2*a*a*a+d:c/2*((a-=2)*a*a+2)+d}},Quart:{easeIn:function(a,d,c,b){return c*(a/=b)*a*a*a+d},easeOut:function(a,d,c,b){return-c*((a=a/b-1)*a*a*a-1)+d},easeInOut:function(a,d,c,b){return 1>(a/=b/2)?c/2*a*a*a*a+d:-c/2*((a-=2)*a*a*a-2)+d}},Quint:{easeIn:function(a,d,c,b){return c*(a/=b)*a*a*a*a+d},easeOut:function(a,d,c,b){return c*((a=a/b-1)*a*a*a*a+1)+d},easeInOut:function(a,d,c,b){return 1>(a/=b/2)?c/2*a*a*a*a*a+d:c/2*((a-=2)*a*a*a*a+2)+d}},Sine:{easeIn:function(a,d,c,b){return-c*
Math.cos(a/b*(Math.PI/2))+c+d},easeOut:function(a,d,c,b){return c*Math.sin(a/b*(Math.PI/2))+d},easeInOut:function(a,d,c,b){return-c/2*(Math.cos(Math.PI*a/b)-1)+d}},Strong:{easeIn:function(a,d,c,b){return c*(a/=b)*a*a*a*a+d},easeOut:function(a,d,c,b){return c*((a=a/b-1)*a*a*a*a+1)+d},easeInOut:function(a,d,c,b){return 1>(a/=b/2)?c/2*a*a*a*a*a+d:c/2*((a-=2)*a*a*a*a+2)+d}},Expo:{easeIn:function(a,d,c,b){return 0==a?d:c*Math.pow(2,10*(a/b-1))+d},easeOut:function(a,d,c,b){return a==b?d+c:c*(-Math.pow(2,
-10*a/b)+1)+d},easeInOut:function(a,d,c,b){return 0==a?d:a==b?d+c:1>(a/=b/2)?c/2*Math.pow(2,10*(a-1))+d:c/2*(-Math.pow(2,-10*--a)+2)+d}},Circ:{easeIn:function(a,d,c,b){return-c*(Math.sqrt(1-(a/=b)*a)-1)+d},easeOut:function(a,d,c,b){return c*Math.sqrt(1-(a=a/b-1)*a)+d},easeInOut:function(a,d,c,b){return 1>(a/=b/2)?-c/2*(Math.sqrt(1-a*a)-1)+d:c/2*(Math.sqrt(1-(a-=2)*a)+1)+d}},Elastic:{easeIn:function(a,d,c,b,e,n){if(0==a)return d;if(1==(a/=b))return d+c;n||(n=.3*b);!e||e<Math.abs(c)?(e=c,c=n/4):c=n/
(2*Math.PI)*Math.asin(c/e);return-(e*Math.pow(2,10*--a)*Math.sin(2*(a*b-c)*Math.PI/n))+d},easeOut:function(a,d,c,b,e,n){var k;if(0==a)return d;if(1==(a/=b))return d+c;n||(n=.3*b);!e||e<Math.abs(c)?(e=c,k=n/4):k=n/(2*Math.PI)*Math.asin(c/e);return e*Math.pow(2,-10*a)*Math.sin(2*(a*b-k)*Math.PI/n)+c+d},easeInOut:function(a,d,c,b,e,n){var k;if(0==a)return d;if(2==(a/=b/2))return d+c;n||(n=.3*b*1.5);!e||e<Math.abs(c)?(e=c,k=n/4):k=n/(2*Math.PI)*Math.asin(c/e);return 1>a?-.5*e*Math.pow(2,10*--a)*Math.sin(2*
(a*b-k)*Math.PI/n)+d:e*Math.pow(2,-10*--a)*Math.sin(2*(a*b-k)*Math.PI/n)*.5+c+d}},Back:{easeIn:function(a,d,c,b,e){typeof e==UNDEFINED&&(e=1.70158);return c*(a/=b)*a*((e+1)*a-e)+d},easeOut:function(a,d,c,b,e){typeof e==UNDEFINED&&(e=1.70158);return c*((a=a/b-1)*a*((e+1)*a+e)+1)+d},easeInOut:function(a,d,c,b,e){typeof e==UNDEFINED&&(e=1.70158);return 1>(a/=b/2)?c/2*a*a*(((e*=1.525)+1)*a-e)+d:c/2*((a-=2)*a*(((e*=1.525)+1)*a+e)+2)+d}},Bounce:{easeIn:function(a,d,c,b){return c-LEasing.Bounce.easeOut(b-
a,0,c,b)+d},easeOut:function(a,d,c,b){return(a/=b)<1/2.75?7.5625*c*a*a+d:a<2/2.75?c*(7.5625*(a-=1.5/2.75)*a+.75)+d:a<2.5/2.75?c*(7.5625*(a-=2.25/2.75)*a+.9375)+d:c*(7.5625*(a-=2.625/2.75)*a+.984375)+d},easeInOut:function(a,d,c,b){return a<b/2?.5*LEasing.Bounce.easeIn(2*a,0,c,b)+d:.5*LEasing.Bounce.easeOut(2*a-b,0,c,b)+.5*c+d}}},Quad=LEasing.Quad,Cubic=LEasing.Cubic,Quart=LEasing.Quart,Quint=LEasing.Quint,Sine=LEasing.Sine,Strong=LEasing.Strong,Expo=LEasing.Expo,Circ=LEasing.Circ,Elastic=LEasing.Elastic,
Back=LEasing.Back,Bounce=LEasing.Bounce,LTweenLiteTimeline,LTweenLite=function(){function a(a,b,c){LExtends(this,LObject,[]);this.type="LTweenLiteChild";this.toNew=[];this.init(a,b,c)}function d(){LExtends(this,LObject,[]);this.type="LTweenLite";this.tweens=[]}var c={init:function(a,b,c){var f=null;typeof c.tweenTimeline==UNDEFINED&&(c.tweenTimeline=d.TYPE_FRAME);this.target=a;this.duration=b||.001;this.vars=c;this.delay=this.vars.delay||0;this.vars.tweenTimeline==d.TYPE_TIMER?(this.initTime=this.currentTime=
(new Date).getTime()/1E3,this.startTime=this.initTime+this.delay):(this.currentTime=0,this.duration*=1E3,this.currentTime-=1E3*this.delay);this.combinedTimeScale=this.vars.timeScale||1;this.active=0==this.duration&&0==this.delay;this.varsto={};this.varsfrom={};this.varsDiff={};this.varsListIndex={};this.varsListCurr={};this.varsListTo={};this.varsListLength={};this.stop=!1;"function"!=typeof this.vars.ease&&(this.vars.ease=LEasing.None.easeIn);this.ease=this.vars.ease;delete this.vars.ease;this.vars.onComplete&&
(this.onComplete=this.vars.onComplete,delete this.vars.onComplete);this.vars.onUpdate&&(this.onUpdate=this.vars.onUpdate,delete this.vars.onUpdate);this.vars.onStart&&(this.onStart=this.vars.onStart,delete this.vars.onStart);for(f in this.vars)if("coordinate"==f&&Array.isArray(this.vars[f])){a=0;b={x:this.target.x,y:this.target.y};c=0;for(var g=this.vars[f].length;c<g;c++){var h=this.vars[f][c];a+=LPoint.distance(h,b);b=h}this.varsListIndex[f]=0;this.varsListCurr[f]=0;this.varsListTo[f]=a;this.varsto[f]=
this.vars[f];this.varsfrom[f]={x:this.target.x,y:this.target.y}}else"number"==typeof this.vars[f]&&(this.varsto[f]=this.vars[f],this.varsfrom[f]=this.target[f],this.varsDiff[f]=this.vars[f]-this.target[f])},pause:function(){this.stop=!0},resume:function(){this.stop=!1},tween:function(){var a,c=this.vars.tweenTimeline==d.TYPE_TIMER;if(c){var k=(new Date).getTime()/1E3-this.startTime;if(0>k)return}else{if(this.stop)return;this.currentTime+=LGlobal.speed;if(0>this.currentTime)return}for(b in this.varsto)if(typeof this.varsListTo[b]!=
UNDEFINED){var f=this.ease(c?k:this.currentTime,0,this.varsListTo[b],this.duration);f>this.varsListTo[b]&&(f=this.varsListTo[b]);for(var g=0<this.varsListIndex[b]?this.vars[b][this.varsListIndex[b]-1]:this.varsfrom[b],h=this.vars[b][this.varsListIndex[b]],q=LPoint.distance(g,h);this.varsListCurr[b]+q<f;)this.varsListCurr[b]+=q,g=h,this.varsListIndex[b]++,h=this.vars[b][this.varsListIndex[b]],q=LPoint.distance(g,h);this.target.x=g.x;this.target.y=g.y;0!=q&&0!=h.x-g.x&&(this.target.x+=(h.x-g.x)*(f-
this.varsListCurr[b])/q);0!=q&&0!=h.y-g.y&&(this.target.y+=(h.y-g.y)*(f-this.varsListCurr[b])/q)}else this.target[b]=this.ease(c?k:this.currentTime,this.varsfrom[b],this.varsDiff[b],this.duration);this.onStart&&(this._dispatchEvent(this.onStart),delete this.onStart);if(c?k>=this.duration:this.currentTime>=this.duration){for(a in this.varsto)typeof this.varsListTo[a]!=UNDEFINED?(c=this.varsto[a][this.vars[a].length-1],this.target.x=c.x,this.target.y=c.y):this.target[a]=this.varsto[a];this.onComplete&&
this._dispatchEvent(this.onComplete);return!0}this.onUpdate&&this._dispatchEvent(this.onUpdate);return!1},_dispatchEvent:function(a){this.target.target=this.target;this.target.currentTarget=this;a(this.target);delete this.target.currentTarget;delete this.target.target},to:function(a,b,c,d){this.toNew.push({target:a,duration:b,vars:c,data:d});return this},keep:function(){var a,b,c,f;if(0<this.toNew.length){a=this.toNew.shift();a.vars.loop&&(this.loop=!0);if(this.loop){f={};b={};for(c in a.vars)b[c]=
a.vars[c],typeof a.target[c]!=UNDEFINED&&a.vars.playStyle==d.PlayStyle.Init&&(a.data?a.target[c]=a.data[c]:f[c]=a.target[c]);a.data||(a.data=f);this.to(a.target,a.duration,b,a.data)}this.init(a.target,a.duration,a.vars);return!0}return!1}},b;for(b in c)a.prototype[b]=c[b];d.PlayStyle={None:"none",Init:"init"};d.TYPE_FRAME="type_frame";d.TYPE_TIMER="type_timer";c={count:function(){return this.tweens.length},ll_show:function(){var a,b=this.tweens.length,c;for(a=0;a<b;a++)(c=this.tweens[a])&&c.tween&&
c.tween()&&(this.tweens.splice(a,1),a--,b=this.tweens.length,c.keep()&&this.add(c))},to:function(b,c,d){if(b){var f=new a({},0,{});this.tweens.push(f);f.to(b,c,d);return f}},add:function(a){this.tweens.push(a)},remove:function(a){if(typeof a!=UNDEFINED)for(var b=0,c=this.tweens.length;b<c;b++)if(a.objectIndex==this.tweens[b].objectIndex){this.tweens.splice(b,1);break}},removeAll:function(){this.tweens.splice(0,this.tweens.length)},pauseAll:function(){for(var a=0,b=this.tweens.length;a<b;a++)this.tweens[a].pause()},
resumeAll:function(){for(var a=0,b=this.tweens.length;a<b;a++)this.tweens[a].resume()}};for(b in c)d.prototype[b]=c[b];LTweenLiteTimeline=new d;LGlobal.childList.push(LTweenLiteTimeline);c=new d;c.TYPE_FRAME=d.TYPE_FRAME;c.TYPE_TIMER=d.TYPE_TIMER;c.PlayStyle=d.PlayStyle;LGlobal.childList.push(c);return c}(),LAjax=function(){function a(){this.responseType=null}a.prototype={TEXT:"text",JSON:"json",ARRAY_BUFFER:"arraybuffer",BLOB:"blob",get:function(a,c,b,e){this.getRequest("GET",a,c,b,e)},post:function(a,
c,b,e){this.getRequest("POST",a,c,b,e)},getRequest:function(a,c,b,e,n){var k=this,f,g="",h="";k.err=n;var q=k.getHttp();if(q){if(b)for(f in b)g+=h+f+"="+b[f],h="&";"get"==a.toLowerCase()&&0<g.length&&(c+=(0<=c.indexOf("?")?"&":"?")+g,g=null);q.open(a,c,!0);if(k.responseType){if(k.responseType==k.JSON)try{q.responseType=k.responseType}catch(t){q.responseType=k.TEXT,q._responseType="json"}else q.responseType=k.responseType;k.responseType=k.TEXT}q.setRequestHeader("Content-Type","application/x-www-form-urlencoded");
q.onreadystatechange=function(){4==q.readyState&&(200<=q.status&&300>q.status||304===q.status?e&&(q._responseType==k.JSON?(q._responseType=k.TEXT,e(JSON.parse(q.responseText))):q.responseType==k.ARRAY_BUFFER||q.responseType==k.BLOB||q.responseType==k.JSON?e(q.response):0<q.responseText.length?e(q.responseText):e(null)):n&&n(q))};q.send(g)}},getHttp:function(){if(typeof XMLHttpRequest!=UNDEFINED)return new XMLHttpRequest;try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(a){try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(c){this.err||
this.err(c)}}return!1}};return new a}(),LStageWebView=function(){function a(){LExtends(this,LEventDispatcher,[]);this.display=document.createElement("div");this.iframe=document.createElement("iframe");this.display.style.position="absolute";this.display.style.marginTop="0px";this.display.style.marginLeft="0px";this.display.style.zIndex=a.START_INDEX++;LGlobal.ios&&(this.display.style.overflow="auto",this.display.style.webkitOverflowScrolling="touch");this.display.appendChild(this.iframe);this.idAdded=
!1}a.START_INDEX=11;var d={loadURL:function(a){var c=this;c.iframe.src=a;c.iframe.onload=function(){c.dispatchEvent(LEvent.COMPLETE)}},show:function(){this.idAdded||(LGlobal.object.appendChild(this.display),this.idAdded=!0);"none"==this.display.style.display&&(this.display.style.display="")},die:function(){LGlobal.object.removeChild(this.display);this.idAdded=!1},hide:function(){this.display.style.display="none"},setViewPort:function(a){var c=parseInt(LGlobal.canvasObj.style.width)/LGlobal.canvasObj.width,
d=parseInt(LGlobal.canvasObj.style.height)/LGlobal.canvasObj.height;this.display.style.marginTop=parseInt(LGlobal.canvasObj.style.marginTop)+(a.y*d>>>0)+"px";this.display.style.marginLeft=parseInt(LGlobal.canvasObj.style.marginLeft)+(a.x*c>>>0)+"px";this.iframe.style.width=this.display.style.width=(a.width*c>>>0)+"px";this.iframe.style.height=this.display.style.height=(a.height*d>>>0)+"px"}},c;for(c in d)a.prototype[c]=d[c];return a}(),FPS=function(){function a(){LExtends(this,LSprite,[]);LGlobal.fpsStatus||
(LGlobal.fpsStatus={a:0,b:0,c:0,d:0,e:0,bitmapData:0,display:0,transform:0,graphics:0,text:0,reset:function(){this.a=this.bitmapData;this.b=this.display-1;this.c=this.transform-1;this.d=this.graphics-1;this.e=this.text-5;this.text=this.graphics=this.transform=this.display=this.bitmapData=0}});this.fps=[];this.back=new LShape;this.back.alpha=.5;this.addChild(this.back);for(var a=0;5>a;a++){var c=new LTextField;c.color="#ffffff";c.y=20*a;this.addChild(c);this.fps.push(c)}this.fpsCount=0;this.fpsTime=
(new Date).getTime();this.addEventListener(LEvent.ENTER_FRAME,this.showFPS)}a.prototype.showFPS=function(a){a=a.currentTarget;var c,b;a.fpsCount++;c=(new Date).getTime();1E3>c-a.fpsTime||(a.fps[0].text="FPS:"+Math.round(1E4*a.fpsCount/(c-a.fpsTime))/10,b=LGlobal.fpsStatus,a.fps[1].text="DisplayObject:"+b.c+"/"+b.b,a.fps[2].text="Draw image:"+b.a,a.fps[3].text="Draw graphics:"+b.d,a.fps[4].text="Draw text:"+b.e,a.fpsTime=c,a.fpsCount=0,a.back.graphics.clear(),a.back.graphics.drawRect(0,"#000000",[0,
0,a.fps[1].getWidth(),100],!0,"#000000"))};a.prototype.die=function(){LGlobal.fpsStatus=null;this.callParent("die",arguments)};return a}();var Flash2x=function(){function a(){}var d="",c=(new Date).getTime(),b=a.prototype;b._queue=null;b.loadSceneNameList=null;b._JSONQueue=null;b._loadCount=0;b._loadIndex=0;b._loadState=0;b._loadSceneResList=[];b._completeCallback=null;b._progressCallback=null;b._handleCfgComplete=function(a){if(null!=a)for(var b=0;b<this.loadSceneNameList.length;b++)this._loadSceneResList.push(this.loadSceneNameList[b],JSON.parse(a[this.loadSceneNameList[b]]));if(this._loadIndex<this._loadCount){a=this._loadSceneResList[2*
this._loadIndex+1];var c=a.length;if(0==c)this._handleComplete();else{this._queue=new LLoadManage;if(""!=d)for(b=0;b<c;b++)a[b].path=d+a[b].path;this._queue.load(a,this._handleProgress.bind(this),this._handleComplete.bind(this))}}else this._progressCallback=null,this._completeCallback?(this._loadState=0,this._completeCallback()):this._loadState=0};b._isLoadedScene=function(a){return this[a+"_2x_RES"]?!0:!1};b._handleProgress=function(a){this._progressCallback&&(a=parseInt((this._loadIndex+a/100)/
this._loadCount*100),this._progressCallback(a))};b._handleComplete=function(a){var b=this._loadSceneResList[2*this._loadIndex];this[b+"_2x_RES"]={};this[b+"BitmapDatas"]={};this[b+"SoundDatas"]={};for(var c in a)0==c.indexOf("F2xSSIMGData")?this[b+"_2x_RES"][c]=JSON.parse(a[c]):this[b+"_2x_RES"][c]=a[c];this._loadIndex++;this._handleCfgComplete()};b.loadScene=function(a,b,k,f){if(0<this._loadState)console.log("正在加载项目,暂时不能调用此方法");else{var g=[];this._queue=null;this.loadSceneNameList=[];this._JSONQueue=
null;this._loadState=this._loadIndex=this._loadCount=0;this._loadSceneResList=[];this._progressCallback=this._completeCallback=null;void 0==f&&(f="");d=f;if("string"==typeof a)this._isLoadedScene(a)||(this._loadCount=1,g.push({name:a,path:f+"resource/"+a+"/"+a+".res.json?t="+c,type:"text"})),this.loadSceneNameList.push(a);else for(var h=a.length,q=0;q<h;q++)this._isLoadedScene(a[q])||(this._loadCount++,g.push({name:a[q],path:f+"resource/"+a[q]+"/"+a[q]+".res.json?t="+c,type:"text"}),this.loadSceneNameList.push(a[q]));
0==this._loadCount&&k?k():(this._loadState++,this._completeCallback=k,this._progressCallback=b,this._JSONQueue=new LLoadManage,this._JSONQueue.load(g,null,this._handleCfgComplete.bind(this)))}};b.getSoundByName=function(a,b){if(void 0==this[a+"SoundDatas"][b]){var c=this[a+"_2x_RES"][b];if(c)return c=new LSound(c),this[a+"SoundDatas"][b]=c;console.log("在"+a+"场景中没有找到"+b+"的声音资源");return null}return this[a+"SoundDatas"][b]};b.getBitmapByName=function(a,b){var c=!1;if(void 0==this[a+"BitmapDatas"][b])if(this[a+
"_2x_RES"][b])c=!0,this[a+"BitmapDatas"][b]=new LBitmapData(this[a+"_2x_RES"][b]);else for(var d=0;this[a+"_2x_RES"]["F2xSSIMG"+d];){var g=this[a+"_2x_RES"]["F2xSSIMGData"+d];if(void 0!=g[b]){c=!0;g=g[b];this[a+"BitmapDatas"][b]=new LBitmapData(this[a+"_2x_RES"]["F2xSSIMG"+d],g.x,g.y,g.w,g.h);break}d++}else c=!0;if(c)return this[a+"BitmapDatas"][b];console.log("在"+a+"场景中未找到为"+b+"的图片资源");return null};b.setDisplayInfo=function(a,b,c,d,g,h,q,t,r){a.x=void 0!=b?b:0;a.y=void 0!=c?c:0;a.scaleX=void 0!=
g?g:1;a.scaleY=void 0!=h?h:1;a.alpha=void 0!=d?d:1;a.rotate=void 0!=q?q:0;a.skewX=void 0!=t?t:0;a.skewY=void 0!=r?r:0};b.removeSceneResource=function(a){delete this[a+"BitmapDatas"];delete this[a+"SoundDatas"];delete this[a+"_2x_RES"];var b=eval(a),c;for(c in b)delete b[c];eval(a+"=null;")};b.globalDispatcher=new LEventDispatcher;return new a}(),F2xMovieClipEvent={ON_FRAME_EVENT:"onF2xFameEvent",ON_FRAME_END:"onF2xFameEnd"},F2xMovieClip=function(){function a(){this.frameChildList=[];this.keyIndex=
0;this.soundScene=this.soundName=this.eventName="";this.soundTimes=1}function d(){base(this,LSprite,[]);this._isF2xMovieClip=!0;this.timeline=[];this.currentFrame=1;this.currentLabel="";this._initCurrentFrame=1;this._isInit=!1;this._lastShowIndex=this._lastFrameIndex=0;this.totalFrames=1;this._labelFrame={};this._frameLabel={};this._initIsFront=this.isFront=this._initIsPlaying=this.isPlaying=!0;this.frameChildren=[];this.scriptLayer=[];this.maskArray=[];this._isNeedUpdata=!0;this._isInitButton=!1}
var c=a.prototype;c.setDisplayInfo=function(a,c,d,k,f,g,h,q,t){var r={};r.display=a;r.x=void 0!=c?c:0;r.y=void 0!=d?d:0;r.scaleX=void 0!=f?f:1;r.scaleY=void 0!=g?g:1;r.alpha=void 0!=k?k:1;r.rotation=void 0!=h?h:0;r.skewX=void 0!=q?q:0;r.skewY=void 0!=t?t:0;this.frameChildList.push(r)};c.setGraphicInfo=function(a,c,d){this.frameChildList[this.frameChildList.length-1].graphicInfo={loopType:a,firstFrame:c,parentFrameIndex:d}};c=d.prototype;c._isF2xMovieClip=!0;c.stop=function(){this.isPlaying=!1};c.as=
function(a,c){this.scriptLayer[c]=a};c.addFrameScript=function(a,c){this.as(c,a)};c.a=function(){this._currentLayer=[];this.timeline.unshift(this._currentLayer);return this};c.b=function(b){this._currentLayerFrame=new a;this._currentLayerFrame.keyIndex=this._currentLayer.length;for(var c=0;c<b;c++)this._currentLayer.push(this._currentLayerFrame);this.totalFrames<this._currentLayer.length&&(this.totalFrames=this._currentLayer.length);return this};c.c=function(a,c,d,k,f,g,h,q,t){this._currentLayerFrame.setDisplayInfo(a,
c,d,k,f,g,h,q,t);return this};c.g=function(a,c,d){this._currentLayerFrame.setGraphicInfo(a,c,d);return this};c.setGraphicInfo=function(a){this._graphicInfo=a};c.initButton=function(){var a=this;a._isInitButton||(a.gotoAndStop(1),a.addEventListener(LMouseEvent.MOUSE_DOWN,function(c){a.gotoAndStop(2)}.bind(a)),a.addEventListener(LMouseEvent.MOUSE_UP,function(c){a.gotoAndStop(1)}.bind(a)),a._isInitButton=!0)};c.d=function(a,c){this._labelFrame[a]=c+1;this._frameLabel[c+1]=a;return this};c.getCurrentLabel=
function(){return this._frameLabel[this.currentFrame]?this._frameLabel[this.currentFrame]:""};c.e=function(a){this._currentLayerFrame.eventName=a;return this};c.f=function(a,c,d){this._currentLayerFrame.soundName=c;this._currentLayerFrame.soundScene=a;this._currentLayerFrame.soundTimes=d;return this};c.nextFrame=function(){this.currentFrame<this.totalFrames&&(this.parent&&this.parent._isF2xMovieClip&&(this._lastShowIndex=this.parent._lastFrameIndex),this.currentFrame++,this._isNeedUpdata=!0);this.isPlaying=
!1;this._isInit||(this._initIsPlaying=!1,this._initIsFront=!0)};c.prevFrame=function(){1<this.currentFrame&&(this.parent&&this.parent._isF2xMovieClip&&(this._lastShowIndex=this.parent._lastFrameIndex),this.currentFrame--,this._isNeedUpdata=!0);this.isPlaying=!1};c.gotoAndStop=function(a){this.parent&&this.parent._isF2xMovieClip&&(this._lastShowIndex=this.parent._lastFrameIndex);this.isPlaying=!1;var c;"string"==typeof a?void 0!=this._labelFrame[a]&&(c=this._labelFrame[a]):"number"==typeof a&&(a>this.totalFrames&&
(a=this.totalFrames),1>a&&(a=1),c=a);this._isNeedUpdata=!0;this.currentFrame!=c&&(this.currentFrame=c);this._isInit||(this._initCurrentFrame=c,this._initIsPlaying=!1)};c.play=function(a){this.isPlaying=!0;this.isFront=void 0==a?!0:a;this._isInit||(this._initIsPlaying=!0,this._initIsFront=this.isFront)};c.gotoAndPlay=function(a,c){this._lastShowIndex=this.parent&&this.parent._isF2xMovieClip?this.parent._lastFrameIndex:0;this.isFront=void 0==c?!0:c;this.isPlaying=!0;var d;"string"==typeof a?void 0!=
this._labelFrame[a]&&(d=this._labelFrame[a]):"number"==typeof a&&(a>this.totalFrames&&(a=this.totalFrames),1>a&&(a=1),d=a);this._isNeedUpdata=!0;this.currentFrame!=d&&(this.currentFrame=d);this._isInit||(this._initIsPlaying=!0,this._initIsFront=this.isFront,this._initCurrentFrame=d)};c.addChild=function(){console.log("F2xMovieClip不支持addChild功能,如果想在F2xMovieClip里添加元素,可以在F2xMovieClip里添加空容器对象,然后将元素添加到空容器中以达到同样的效果")};c.addChildAt=function(){console.log("F2xMovieClip不支持addChildAt功能,如果想在F2xMovieClip里添加元素,可以在F2xMovieClip里添加空容器对象,然后将元素添加到空容器中以达到同样的效果")};
c.removeChild=function(){console.log("F2xMovieClip不支持removeChild功能,如果想在F2xMovieClip里删除元素,可以将子元素visible设置为false以达到同样的效果,性能一样")};c.removeChildAt=function(){console.log("F2xMovieClip不支持removeChildAt功能,如果想在F2xMovieClip里删除元素,可以将子元素visible设置为false以达到同样的效果,性能一样")};c.setChildAttr=function(a,c){a._donotUpdateinMC=a._donotUpdateinMC||{};for(var d in c)a._donotUpdateinMC[d]=c[d]};c.delChildAttr=function(a,c){a._donotUpdateinMC=a._donotUpdateinMC||{};for(var d=0;d<c.length;d++)void 0!=a._donotUpdateinMC[c[d]]&&
delete a._donotUpdateinMC[c[d]]};c.ll_show=function(a){if(this._graphicInfo){var c=this.parent.currentFrame?this.parent.currentFrame:1,d=1,k=this._graphicInfo.parentFrameIndex+1,f=this._graphicInfo.firstFrame+1;"play once"==this._graphicInfo.loopType?0<=c-k&&(d=c-k+f,d>this.totalFrames&&(d=this.totalFrames)):"loop"==this._graphicInfo.loopType?(0<=c-k&&(d=(c-k+f)%this.totalFrames),0==d&&(d=this.totalFrames)):d=f;this.currentFrame==d&&this._isInit||(this.currentFrame=d,this._isNeedUpdata=!0);this.isPlaying=
!1}else this.isPlaying&&0<this._lastFrameIndex&&(this.isFront?(this.currentFrame++,this.currentFrame>this.totalFrames&&(this.currentFrame=1)):(this.currentFrame--,1>this.currentFrame&&(this.currentFrame=this.totalFrames)),this._isNeedUpdata=!0);this._isInit||(this._isInit=!0);LSprite.prototype.ll_show.call(this,a)};c._showReady=function(a){if(this._isNeedUpdata){if(void 0!=this.scriptLayer[this.currentFrame-1])this.scriptLayer[this.currentFrame-1]();for(var c=this.maskArray.length,d=0;d<c;d++)this.maskArray[d].gotoAndStop(this.currentFrame);
var c=this.timeline.length,k=0,f=k=null,g=null,h=0;this.childList=[];for(d=0;d<c;d++)if(k=this.timeline[d].length,this.currentFrame<=k&&(k=this.timeline[d][this.currentFrame-1],void 0!=k)){k.keyIndex==this.currentFrame-1&&(""!=k.soundName&&Flash2x.getSoundByName(k.soundScene,k.soundName).play(0,k.soundTimes),""!=k.eventName&&(f=new LEvent(F2xMovieClipEvent.ON_FRAME_EVENT),f.info={frameIndex:this.currentFrame,frameName:k.eventName},this.dispatchEvent(f)));for(var h=k.frameChildList.length,q=0;q<h;q++){g=
k.frameChildList[q];f=g.display;f.x=g.x;f.y=g.y;f.alpha=g.alpha;f.scaleX=g.scaleX;f.scaleY=g.scaleY;f.rotate=g.rotation;f.skewX=g.skewX;f.skewY=g.skewY;g.graphicInfo?f._graphicInfo=g.graphicInfo:f._graphicInfo&&(f._graphicInfo=null);if(void 0!=f._donotUpdateinMC)for(var t in f._donotUpdateinMC)void 0!=f._donotUpdateinMC[t]&&(f[t]=f._donotUpdateinMC[t]);f._isF2xMovieClip&&(f._lastShowIndex!=this._lastFrameIndex&&f._refreshFrame(),f._lastShowIndex=this.currentFrame);f.parent=null;LSprite.prototype.addChild.call(this,
f)}}this._lastFrameIndex=this.currentFrame;this._isNeedUpdata=!1;1!=this.currentFrame||this.isFront?this.currentFrame==this.totalFrames&&this.isFront&&this.hasEventListener(F2xMovieClipEvent.ON_FRAME_END)&&(f=new LEvent(F2xMovieClipEvent.ON_FRAME_END),f.info={frameIndex:this.currentFrame,frameName:"endFrame"},this.dispatchEvent(f)):this.hasEventListener(F2xMovieClipEvent.ON_FRAME_END)&&(f=new LEvent(F2xMovieClipEvent.ON_FRAME_END),f.info={frameIndex:this.currentFrame,frameName:"firstFrame"},this.dispatchEvent(f))}LSprite.prototype._showReady.call(this,
a)};c._refreshFrame=function(){this._lastFrameIndex=0;this.currentFrame=this._initCurrentFrame;this.isPlaying=this._initIsPlaying;this.isFront=this._initIsFront;this._isNeedUpdata=!0};return d}(),F2xBitmap=function(){return function(a,d){var c=Flash2x.getBitmapByName(a,d);base(this,LBitmap,[c])}}(),F2xDomElement=function(){function a(a){LGlobal.preventDefault=!1;base(this,LDisplayObject,[]);"string"==typeof a&&(a=document.getElementById(a));var b=LGlobal.canvasObj.parentNode;b.insertBefore(a,b.childNodes[0]);
this.mouseEnabled=!1;b=a.style;b.position="absolute";b.display="none";b.transformOrigin=b.WebkitTransformOrigin=b.msTransformOrigin=b.MozTransformOrigin=b.OTransformOrigin="0% 0%";this.htmlElement=a;this._oldProps=null;this.alpha=1}var d=a.prototype;d.delElement=function(){this.htmlElement&&this.htmlElement.parentNode.removeChild(this.htmlElement);this.htmlElement=null};d.ll_show=function(){var a=this.htmlElement;if(a){var a=a.style,b;b=this.alpha;for(var d=this;d.parent&&0<b;)b*=d.parent.alpha||
1,d=d.parent;var d=this.getRootMatrix(),n=this.visible?"inline":"none";n!=a.display&&(a.display=n);if(this.visible){var k=(n=this._oldProps)&&n.matrix,f=Flash2x.devicePixelRatio;k=void 0==k?!1:k.tx==d.tx&&k.ty==d.ty&&k.a==d.a&&k.b==d.b&&k.c==d.c&&k.d==d.d;k||(a.transform=a.WebkitTransform=a.OTransform=a.msTransform=a.MozTransform="matrix("+(1E4*d.a|0)/1E4/f+","+(1E4*d.b|0)/1E4/f+","+(1E4*d.c|0)/1E4/f+","+(1E4*d.d|0)/1E4/f+","+(d.tx+.5|0)/f+","+(d.ty+.5|0)/f+")",n||(n={}),n.matrix={tx:d.tx,ty:d.ty,
a:d.a,b:d.b,c:d.c,d:d.d});n.alpha!=b&&(a.opacity=""+(1E4*b|0)/1E4,n.alpha=b);this._oldProps=n}}};return a}(),F2xInputText=function(){function a(a){var b=null;"multiLine"!=a?(b=document.createElement("input"),b.type="password"==a?"password":"text"):(b=document.createElement("textarea"),b.style.resize="none",b.style.overflow="hidden");base(this,F2xDomElement,[b])}var d=a.prototype;d.initialize=function(a,b,d,n,k,f,g,h){this.htmlElement.value=a;this.htmlElement.style.width=b+"px";this.htmlElement.style.height=
d+"px";this.htmlElement.style.font=f;this.htmlElement.style.color=n;this.htmlElement.style.textAlign=k;this.htmlElement.style.outline="none";this.htmlElement.style.borderWidth="thin";this.htmlElement.style.borderColor="#000";this.setBorder(g);this.width=b;this.height=d;"multiLine"==this.inputType&&(this.htmlElement.style.lineHeight=h)};d.setWidth=function(a){this.htmlElement.style.width=a+"px";this.width=a};d.setHeight=function(a){this.htmlElement.style.height=a+"px";this.height=a};d.setFontSize=
function(a){this.htmlElement.style.fontSize=a+"px"};d.setFontFace=function(a){this.htmlElement.style.fontFaceName=a};d.setBorder=function(a){a?(this.htmlElement.style.borderStyle="inset",this.htmlElement.style.backgroundColor="#fff"):(this.htmlElement.style.borderStyle="none",this.htmlElement.style.backgroundColor="transparent")};d.setColor=function(a){this.htmlElement.style.color=a};d.setText=function(a){this.htmlElement.value=a};d.getText=function(){return this.htmlElement.value};return a}();
document.ontouchmove=function(a){a.preventDefault()};var F2xInit=LInit;Flash2x.devicePixelRatio=LGlobal.ios?window.devicePixelRatio:1;Flash2x.radio=1;
Flash2x.initViewSize=function(){Flash2x.stage=LGlobal.stage;switch(LGlobal.stageScale){case LStageScaleMode.NO_BORDER:Flash2x.radio=LGlobal.height/Flash2x.designHeight;var a=LGlobal.height/Flash2x.designHeight*Flash2x.devicePixelRatio;LGlobal.stage.scaleX=a;LGlobal.stage.scaleY=a;switch(LGlobal.align){case LStageAlign.MIDDLE:LGlobal.stage.x=.5*(LGlobal.width*Flash2x.devicePixelRatio-Flash2x.designWidth*a);break;case LStageAlign.LEFT:LGlobal.stage.x=0;break;case LStageAlign.right:LGlobal.stage.x=LGlobal.width*
Flash2x.devicePixelRatio-Flash2x.designWidth*a}break;case LStageScaleMode.SHOW_ALL:switch(Flash2x.radio=LGlobal.height/Flash2x.designHeight,a=LGlobal.width/Flash2x.designWidth*Flash2x.devicePixelRatio,LGlobal.stage.scaleX=a,LGlobal.stage.scaleY=a,LGlobal.align){case LStageAlign.MIDDLE:LGlobal.stage.y=.5*(LGlobal.height*Flash2x.devicePixelRatio-Flash2x.designHeight*a);break;case LStageAlign.TOP:LGlobal.stage.y=0;break;case LStageAlign.BOTTOM:LGlobal.stage.y=LGlobal.height*Flash2x.devicePixelRatio-
Flash2x.designHeight*a}}LGlobal.canvasObj.style.width=LGlobal.width+"px";LGlobal.canvasObj.style.height=LGlobal.height+"px";LGlobal.canvasObj.width=LGlobal.width*Flash2x.devicePixelRatio;LGlobal.canvasObj.height=LGlobal.height*Flash2x.devicePixelRatio};LGlobal.ll_scaleX=function(a){return(a-LGlobal.left)*LGlobal.canvasObj.width/LGlobal.canvasStyleWidth};LGlobal.ll_scaleY=function(a){return(a-LGlobal.top)*LGlobal.canvasObj.height/LGlobal.canvasStyleHeight};
LGlobal.onShow=function(){if(null!=LGlobal.canvas){0>=LGlobal._outStageCheckCount&&(LGlobal._outStageCheckCount--,-2>LGlobal._outStageCheckCount&&(LGlobal.stage.dispatchEvent(new LEvent(LFocusEvent.FOCUS_OUT)),LGlobal._outStageCheckCount=1));LGlobal.fpsStatus&&LGlobal.fpsStatus.reset();if(LGlobal.stage.onresizeEvent){if(LGlobal.stage.onresizeListener)LGlobal.stage.onresizeListener(LGlobal.stage.onresizeEvent);if(LGlobal.stage.onorientationchangeListener)LGlobal.stage.onorientationchangeListener({orientation:window.innerWidth>
window.innerHeight?LANDSCAPE:PORTRAIT});delete LGlobal.stage.onresizeEvent}LGlobal.forceRefresh&&(LGlobal.canvasObj.width=LGlobal.canvasObj.width,LGlobal.forceRefresh=!1);LGlobal.canvas.beginPath();null!=LGlobal.box2d?(LGlobal.box2d.ll_show(),!LGlobal.traceDebug&&LGlobal.keepClear&&LGlobal.canvas.clearRect(0,0,LGlobal.canvasObj.height+1,LGlobal.canvasObj.height+1)):(LGlobal.keepClear&&LGlobal.canvas.clearRect(0,0,LGlobal.canvasObj.width+1,LGlobal.canvasObj.height+1),null!==LGlobal.backgroundColor&&
(LGlobal.canvas.fillStyle=LGlobal.backgroundColor,LGlobal.canvas.fillRect(0,0,LGlobal.canvasObj.width,LGlobal.canvasObj.height)));LGlobal.show(LGlobal.childList,LGlobal.canvas)}};
LDisplayObject.prototype.cacheAsBitmap=function(a){if(a){a=this.x-this.startX();var d=this.y-this.startY(),c=this.getDataCanvas(a+10,d+10,this.getWidth()+20,this.getHeight()+20),c=new LBitmapData(c,0,0,null,null,LBitmapData.DATA_CANVAS),c=new LBitmap(c);c.x=-a-10;c.y=-d-10;this._ll_cacheAsBitmap=c}else this._ll_cacheAsBitmap=null};
LGraphics.prototype.beginGradientFill=function(a,d,c){var b;b=4<a.length?LGlobal.canvas.createRadialGradient(a[0],a[1],a[2],a[3],a[4],a[5]):LGlobal.canvas.createLinearGradient(a[0],a[1],a[2],a[3]);a=d.length;for(var e=0;e<a;e++)b.addColorStop(c[e],d[e]);this.add(function(a){a.fillStyle=b})};
LGraphics.prototype.lineGradientStyle=function(a,d,c,b){var e;e=4<d.length?LGlobal.canvas.createRadialGradient(d[0],d[1],d[2],d[3],d[4],d[5]):LGlobal.canvas.createLinearGradient(d[0],d[1],d[2],d[3]);d=c.length;for(var n=0;n<d;n++)e.addColorStop(b[n],c[n]);this.add(function(b){b.lineWidth=a;b.strokeStyle=e})};
LGraphics.prototype.decodePath=function(a){var d={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"+":62,"/":63},c=[2,2,4,6,0],b=0,e=a.length,n=[],k=0,f=0;this.add(function(){LGlobal.canvas.beginPath()});for(var g=[];b<e;){var h=a.charAt(b),q=d[h],t=
q>>3;if(q&3)throw"bad path data (@"+b+"): "+h;h=c[t];t||(k=f=0);n.length=0;b++;for(var q=(q>>2&1)+2,r=0;r<h;r++){var x=d[a.charAt(b)],y=x>>5?-1:1,x=(x&31)<<6|d[a.charAt(b+1)];3==q&&(x=x<<6|d[a.charAt(b+2)]);x=y*x/10;r%2?k=x+=k:f=x+=f;n[r]=x;b+=q}0==t?(this.moveTo(n[0],n[1]),g.push([n[0],n[1]])):1==t?(this.lineTo(n[0],n[1]),g.push([n[0],n[1]])):2==t?(this.curveTo(n[0],n[1],n[2],n[3]),g.push([n[0],n[1]],[n[2],n[3]])):4==t&&this.closePath()}this.showList=[];this.showList.push({type:LShape.VERTICES,arg:g})};
LGraphics.prototype.curveTo=function(a,d,c,b){this.add(function(e){e.quadraticCurveTo(a,d,c,b)})};LGraphics.prototype.beginFill=function(a){this.add(function(d){d.fillStyle=a})};LGraphics.prototype.beginBitmap=function(a,d){var c=this;c._f2xBitmap=LGlobal.canvas.createPattern(a,"repeat");c._f2xBitmapMtrix=d;this.add(function(a){a.fillStyle=c._f2xBitmap})};
LGraphics.prototype.endBitmap=function(){var a=this;this.add(function(d){var c=a._f2xBitmapMtrix;c&&(d.save(),d.transform(c.a,c.b,c.c,c.d,c.tx,c.ty));d.fill();c&&d.restore()})};LGraphics.prototype.beginStroke=function(a,d){this.add(function(c){c.lineWidth=a;c.strokeStyle=d})};
LDisplayObject.prototype._transformRotate=function(){var a;void 0==this.skewX&&(this.skewX=0);void 0==this.skewY&&(this.skewY=0);if(0!=this.rotate||0!=this.skewX||0!=this.skewY)a=LGlobal.canvas,rotateFlag=Math.PI/180,rotateObj=new LMatrix,typeof this.rotatex==UNDEFINED&&(this.rotatey=this.rotatex=0),this.box2dBody&&(rotateFlag=1),0!=this.rotate?(rotateObj.a=Math.cos(this.rotate*rotateFlag),rotateObj.b=Math.sin(this.rotate*rotateFlag),rotateObj.c=-rotateObj.b,rotateObj.d=rotateObj.a):(rotateObj.a=
Math.cos(this.skewY*rotateFlag),rotateObj.b=Math.sin(this.skewY*rotateFlag),rotateObj.c=Math.sin(-this.skewX*rotateFlag),rotateObj.d=Math.cos(this.skewX*rotateFlag)),rotateObj.tx=this.x+this.rotatex,rotateObj.ty=this.y+this.rotatey,rotateObj.transform(a).setTo(1,0,0,1,-rotateObj.tx,-rotateObj.ty).transform(a)};